!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Editable=t():e.Editable=t()}(self,(function(){return(()=>{var e={206:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),a=Math.max(i,o),s=0,c=e.map([t,n],(function(t){var n=a-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===s)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=e,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var s=function(){var e=o[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){r[t]=e[t]}))};for(t=0,n=o.length;t<n;t+=1)s();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){}var t,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,n=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],null&&a(t.prototype,null),n&&a(t,n),e}();t.default=s,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=c(n(92)),i=c(n(93)),o=c(n(94)),a=c(n(95)),s=c(n(17));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(Object.keys(e).forEach((function(t){var a=e[t];"string"==typeof a?(i[t]=a,o+=1):"object"==typeof a&&(n[t]=a,r+=1)})),r>0){var a=Object.keys(n),c=s.default.find(a,(function(e){return t.isOS(e)}));if(c){var u=this.satisfies(n[c]);if(void 0!==u)return u}var l=s.default.find(a,(function(e){return t.isPlatform(e)}));if(l){var f=this.satisfies(n[l]);if(void 0!==f)return f}}if(o>0){var d=Object.keys(i),h=s.default.find(d,(function(e){return t.isBrowser(e,!0)}));if(void 0!==h)return this.compareVersion(i[h])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=u,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=a,e.exports=t.default}})},8:function(e,t,n){var r,i;void 0===(i="function"==typeof(r=function(){var e="object",t="undefined",n=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],r=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],i=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],o=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function a(t,n){var r=typeof t[n];return"function"==r||!(r!=e||!t[n])||"unknown"==r}function s(t,n){return!(typeof t[n]!=e||!t[n])}function c(e,n){return typeof e[n]!=t}function u(e){return function(t,n){for(var r=n.length;r--;)if(!e(t,n[r]))return!1;return!0}}var l=u(a),f=u(s),d=u(c);function h(e){return e&&l(e,o)&&d(e,i)}function g(e){return s(e,"body")?e.body:e.getElementsByTagName("body")[0]}var p,v,m={},y=typeof window!=t&&typeof document!=t,b={isHostMethod:a,isHostObject:s,isHostProperty:c,areHostMethods:l,areHostObjects:f,areHostProperties:d,isTextRange:h,getBody:g,forEach:[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,r=e.length;n<r;++n)t(e[n],n)}},S={version:"1.3.0",initialized:!1,isBrowser:y,supported:!0,util:b,features:{},modules:m,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==t||rangyAutoInitialize}};function C(e){typeof console!=t&&a(console,"log")&&console.log(e)}function w(e,t){y&&t?alert(e):C(e)}function R(e){S.initialized=!0,S.supported=!1,w("Rangy is not supported in this environment. Reason: "+e,S.config.alertOnFail)}S.fail=R,S.warn=function(e){w("Rangy warning: "+e,S.config.alertOnWarn)},{}.hasOwnProperty?(b.extend=p=function(e,t,n){var r,i;for(var o in t)t.hasOwnProperty(o)&&(r=e[o],i=t[o],n&&null!==r&&"object"==typeof r&&null!==i&&"object"==typeof i&&p(r,i,!0),e[o]=i);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},b.createOptions=function(e,t){var n={};return p(n,t),e&&p(n,e),n}):R("hasOwnProperty not supported"),y||R("Rangy can only run in a browser"),function(){var e;if(y){var t=document.createElement("div");t.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(e){}}e||(e=function(e){for(var t=[],n=0,r=e.length;n<r;++n)t[n]=e[n];return t}),b.toArray=e}(),y&&(a(document,"addEventListener")?v=function(e,t,n){e.addEventListener(t,n,!1)}:a(document,"attachEvent")?v=function(e,t,n){e.attachEvent("on"+t,n)}:R("Document does not have required addEventListener or attachEvent method"),b.addListener=v);var E=[];function N(e){return e.message||e.description||String(e)}function A(){if(y&&!S.initialized){var e,t=!1,i=!1;a(document,"createRange")&&(e=document.createRange(),l(e,r)&&d(e,n)&&(t=!0));var o=g(document);if(o&&"body"==o.nodeName.toLowerCase())if(o&&a(o,"createTextRange")&&h(e=o.createTextRange())&&(i=!0),t||i){var s;for(var c in S.initialized=!0,S.features={implementsDomRange:t,implementsTextRange:i},m)(s=m[c])instanceof T&&s.init(s,S);for(var u=0,f=E.length;u<f;++u)try{E[u](S)}catch(e){C("Rangy init listener threw an exception. Continuing. Detail: "+N(e))}}else R("Neither Range nor TextRange are available");else R("No body element found")}}function k(e,t,n){n&&(e+=" in module "+n.name),S.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function O(e,t,n,r){e[t]=function(){return k(t,n,r),e[n].apply(e,b.toArray(arguments))}}b.deprecationNotice=k,b.createAliasForDeprecatedMethod=O,S.init=A,S.addInitListener=function(e){S.initialized?e(S):E.push(e)};var _=[];function T(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function x(e,t,n){var r=new T(e,t,(function(t){if(!t.initialized){t.initialized=!0;try{n(S,t),t.supported=!0}catch(t){C("Module '"+e+"' failed to load: "+N(t)),t.stack&&C(t.stack)}}}));return m[e]=r,r}function M(){}S.addShimListener=function(e){_.push(e)},y&&(S.shim=S.createMissingNativeApi=function(e){e=e||window,A();for(var t=0,n=_.length;t<n;++t)_[t](e)},O(S,"createMissingNativeApi","shim")),T.prototype={init:function(){for(var e,t,n=this.dependencies||[],r=0,i=n.length;r<i;++r){if(t=n[r],!((e=m[t])&&e instanceof T))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){S.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){S.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},S.createModule=function(e){var t,n;2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]);var r=x(e,n,t);S.initialized&&S.supported&&r.init()},S.createCoreModule=function(e,t,n){x(e,t,n)},S.RangePrototype=M,S.rangePrototype=new M,S.selectionPrototype=new function(){},S.createCoreModule("DomUtil",[],(function(e,t){var n="undefined",r=e.util,i=r.getBody;r.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),r.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var o=document.createElement("div");r.areHostMethods(o,["insertBefore","appendChild","cloneNode"]||0)||t.fail("Incomplete Element implementation"),r.isHostProperty(o,"innerHTML")||t.fail("Element is missing innerHTML property");var a=document.createTextNode("test");r.areHostMethods(a,["splitText","deleteData","insertData","appendData","cloneNode"]||0)||t.fail("Incomplete Text Node implementation");var s=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};function c(e){for(var t=0;e=e.previousSibling;)++t;return t}function u(e,t){var n,r=[];for(n=e;n;n=n.parentNode)r.push(n);for(n=t;n;n=n.parentNode)if(s(r,n))return n;return null}function l(e,t,n){for(var r=n?t:t.parentNode;r;){if(r===e)return!0;r=r.parentNode}return!1}function f(e,t,n){for(var r,i=n?e:e.parentNode;i;){if((r=i.parentNode)===t)return i;i=r}return null}function d(e){var t=e.nodeType;return 3==t||4==t||8==t}function h(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function g(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=n)return e.ownerDocument;if(typeof e.document!=n)return e.document;if(e.parentNode)return g(e.parentNode);throw t.createError("getDocument: no document found for node")}function p(e){var r=g(e);if(typeof r.defaultView!=n)return r.defaultView;if(typeof r.parentWindow!=n)return r.parentWindow;throw t.createError("Cannot get a window object for node")}function v(e){if(typeof e.contentDocument!=n)return e.contentDocument;if(typeof e.contentWindow!=n)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function m(e){return e&&r.isHostMethod(e,"setTimeout")&&r.isHostObject(e,"document")}var y,b=!1;function S(e){try{return e.parentNode,!1}catch(e){return!0}}function C(e){if(!e)return"[No node]";if(b&&S(e))return"[Broken node]";if(d(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+c(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function w(e){this.root=e,this._next=e}function R(e,t){this.node=e,this.offset=t}function E(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}!function(){var t=document.createElement("b");t.innerHTML="1";var n=t.firstChild;t.innerHTML="<br />",b=S(n),e.features.crashyTextNodes=b}(),typeof window.getComputedStyle!=n?y=function(e,t){return p(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=n?y=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found"),w.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},R.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+C(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},E.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},E.prototype.toString=function(){return this.message},e.dom={arrayContains:s,isHtmlNamespace:function(e){var t;return typeof e.namespaceURI==n||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t},parentElement:function(e){var t=e.parentNode;return 1==t.nodeType?t:null},getNodeIndex:c,getNodeLength:function(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}},getCommonAncestor:u,isAncestorOf:l,isOrIsAncestorOf:function(e,t){return l(e,t,!0)},getClosestAncestorIn:f,isCharacterDataNode:d,isTextOrCommentNode:function(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t},insertAfter:h,splitDataNode:function(e,t,n){var r=e.cloneNode(!1);if(r.deleteData(0,t),e.deleteData(t,e.length-t),h(r,e),n)for(var i,o=0;i=n[o++];)i.node==e&&i.offset>t?(i.node=r,i.offset-=t):i.node==e.parentNode&&i.offset>c(e)&&++i.offset;return r},getDocument:g,getWindow:p,getIframeWindow:function(e){if(typeof e.contentWindow!=n)return e.contentWindow;if(typeof e.contentDocument!=n)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")},getIframeDocument:v,getBody:i,isWindow:m,getContentDocument:function(e,t,n){var i;if(e?r.isHostProperty(e,"nodeType")?i=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?v(e):g(e):m(e)&&(i=e.document):i=document,!i)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return i},getRootContainer:function(e){for(var t;t=e.parentNode;)e=t;return e},comparePoints:function(e,n,r,i){var o,a,s,l,d;if(e==r)return n===i?0:n<i?-1:1;if(o=f(r,e,!0))return n<=c(o)?-1:1;if(o=f(e,r,!0))return c(o)<i?-1:1;if(!(a=u(e,r)))throw new Error("comparePoints error: nodes have no common ancestor");if((s=e===a?a:f(e,a,!0))===(l=r===a?a:f(r,a,!0)))throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(d=a.firstChild;d;){if(d===s)return-1;if(d===l)return 1;d=d.nextSibling}},isBrokenNode:S,inspectNode:C,getComputedStyleProperty:y,createTestElement:function(e,t,n){var r=i(e),o=e.createElement("div");o.contentEditable=""+!!n,t&&(o.innerHTML=t);var a=r.firstChild;return a?r.insertBefore(o,a):r.appendChild(o),o},removeNode:function(e){return e.parentNode.removeChild(e)},fragmentFromNodeChildren:function(e){for(var t,n=g(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n},createIterator:function(e){return new w(e)},DomPosition:R},e.DOMException=E})),S.createCoreModule("DomRange",["DomUtil"],(function(e,t){var n=e.dom,r=e.util,i=n.DomPosition,o=e.DOMException,a=n.isCharacterDataNode,s=n.getNodeIndex,c=n.isOrIsAncestorOf,u=n.getDocument,l=n.comparePoints,f=n.splitDataNode,d=n.getClosestAncestorIn,h=n.getNodeLength,g=n.arrayContains,p=n.getRootContainer,v=e.features.crashyTextNodes,m=n.removeNode;function y(e,t){return 3!=e.nodeType&&(c(e,t.startContainer)||c(e,t.endContainer))}function b(e){return e.document||u(e.startContainer)}function S(e){return new i(e.parentNode,s(e))}function C(e){return new i(e.parentNode,s(e)+1)}function w(e,t,r){var i=11==e.nodeType?e.firstChild:e;return a(t)?r==t.length?n.insertAfter(e,t):t.parentNode.insertBefore(e,0==r?t:f(t,r)):r>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[r]),i}function R(e,t,n){if(G(e),G(t),b(t)!=b(e))throw new o("WRONG_DOCUMENT_ERR");var r=l(e.startContainer,e.startOffset,t.endContainer,t.endOffset),i=l(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?r<=0&&i>=0:r<0&&i>0}function E(e){for(var t,n,r,i=b(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(r=e.getSubtreeIterator(),n.appendChild(E(r)),r.detach()),10==n.nodeType)throw new o("HIERARCHY_REQUEST_ERR");i.appendChild(n)}return i}function N(e,t,r){var i,o,a,s;for(r=r||{stop:!1};a=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(a))return void(r.stop=!0);if(N(s=e.getSubtreeIterator(),t,r),s.detach(),r.stop)return}else for(i=n.createIterator(a);o=i.next();)if(!1===t(o))return void(r.stop=!0)}function A(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(A(t=e.getSubtreeIterator()),t.detach()):e.remove()}function k(e){for(var t,n,r=b(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(k(n)),n.detach()):e.remove(),10==t.nodeType)throw new o("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}function O(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+n.inspectNode(e.startContainer)+":"+e.startOffset+", "+n.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function _(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&a(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||a(this.sc)?d(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||a(this.ec)?d(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}_.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,a(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!a(n)||n!==this.sc&&n!==this.ec?n.parentNode&&m(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},isPartiallySelectedSubtree:function(){return y(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)(e=this.range.cloneRange()).collapse(!1);else{e=new oe(b(this.range));var t=this._current,n=t,r=0,i=t,o=h(t);c(t,this.sc)&&(n=this.sc,r=this.so),c(t,this.ec)&&(i=this.ec,o=this.eo),ie(e,n,r,i,o)}return new _(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var T=[1,3,4,5,7,8,10],x=[2,9,11],M=[1,3,4,5,7,8,10,11],B=[1,3,4,5,7,8];function P(e){return function(t,n){for(var r,i=n?t:t.parentNode;i;){if(r=i.nodeType,g(e,r))return i;i=i.parentNode}return null}}var L=P([9,11]),F=P([5,6,10,12]),I=P([6,10,12]);function D(e,t){if(I(e,t))throw new o("INVALID_NODE_TYPE_ERR")}function j(e,t){if(!g(t,e.nodeType))throw new o("INVALID_NODE_TYPE_ERR")}function H(e,t){if(t<0||t>(a(e)?e.length:e.childNodes.length))throw new o("INDEX_SIZE_ERR")}function W(e,t){if(L(e,!0)!==L(t,!0))throw new o("WRONG_DOCUMENT_ERR")}function V(e){if(F(e,!0))throw new o("NO_MODIFICATION_ALLOWED_ERR")}function q(e,t){if(!e)throw new o(t)}function z(e,t){return t<=(a(e)?e.length:e.childNodes.length)}function U(e){return!!e.startContainer&&!!e.endContainer&&!(v&&(n.isBrokenNode(e.startContainer)||n.isBrokenNode(e.endContainer)))&&p(e.startContainer)==p(e.endContainer)&&z(e.startContainer,e.startOffset)&&z(e.endContainer,e.endOffset)}function G(e){if(!U(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}var K=document.createElement("style"),$=!1;try{K.innerHTML="<b>x</b>",$=3==K.firstChild.nodeType}catch(e){}e.features.htmlParsingConforms=$;var Q=$?function(e){var t=this.startContainer,r=u(t);if(!t)throw new o("INVALID_STATE_ERR");var i=null;return 1==t.nodeType?i=t:a(t)&&(i=n.parentElement(t)),(i=null===i||"HTML"==i.nodeName&&n.isHtmlNamespace(u(i).documentElement)&&n.isHtmlNamespace(i)?r.createElement("body"):i.cloneNode(!1)).innerHTML=e,n.fragmentFromNodeChildren(i)}:function(e){var t=b(this).createElement("body");return t.innerHTML=e,n.fragmentFromNodeChildren(t)};function Y(e,t){G(e);var n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,c=n===i;a(i)&&o>0&&o<i.length&&f(i,o,t),a(n)&&r>0&&r<n.length&&(n=f(n,r,t),c?(o-=r,i=n):i==n.parentNode&&o>=s(n)&&o++,r=0),e.setStartAndEnd(n,r,i,o)}function X(e){G(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}var Z=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"];function J(e){e.START_TO_START=0,e.START_TO_END=1,e.END_TO_END=2,e.END_TO_START=3,e.NODE_BEFORE=0,e.NODE_AFTER=1,e.NODE_BEFORE_AND_AFTER=2,e.NODE_INSIDE=3}function ee(e){J(e),J(e.prototype)}function te(e,t){return function(){G(this);var n,r=this.startContainer,i=this.startOffset,o=this.commonAncestorContainer,a=new _(this,!0);r!==o&&(r=(n=C(d(r,o,!0))).node,i=n.offset),N(a,V),a.reset();var s=e(a);return a.detach(),t(this,r,i,r,i),s}}function ne(t,n){function i(e,t){return function(n){j(n,T),j(p(n),x);var r=(e?S:C)(n);(t?o:c)(this,r.node,r.offset)}}function o(e,t,r){var i=e.endContainer,o=e.endOffset;t===e.startContainer&&r===e.startOffset||(p(t)==p(i)&&1!=l(t,r,i,o)||(i=t,o=r),n(e,t,r,i,o))}function c(e,t,r){var i=e.startContainer,o=e.startOffset;t===e.endContainer&&r===e.endOffset||(p(t)==p(i)&&-1!=l(t,r,i,o)||(i=t,o=r),n(e,i,o,t,r))}var u=function(){};u.prototype=e.rangePrototype,t.prototype=new u,r.extend(t.prototype,{setStart:function(e,t){D(e,!0),H(e,t),o(this,e,t)},setEnd:function(e,t){D(e,!0),H(e,t),c(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],r=e[1],i=t,o=r;switch(e.length){case 3:o=e[2];break;case 4:i=e[2],o=e[3]}n(this,t,r,i,o)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:i(!0,!0),setStartAfter:i(!1,!0),setEndBefore:i(!0,!1),setEndAfter:i(!1,!1),collapse:function(e){G(this),e?n(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):n(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){D(e,!0),n(this,e,0,e,h(e))},selectNode:function(e){D(e,!1),j(e,T);var t=S(e),r=C(e);n(this,t.node,t.offset,r.node,r.offset)},extractContents:te(k,n),deleteContents:te(A,n),canSurroundContents:function(){G(this),V(this.startContainer),V(this.endContainer);var e=new _(this,!0),t=e._first&&y(e._first,this)||e._last&&y(e._last,this);return e.detach(),!t},splitBoundaries:function(){Y(this)},splitBoundariesPreservingPositions:function(e){Y(this,e)},normalizeBoundaries:function(){G(this);var e,t=this.startContainer,r=this.startOffset,i=this.endContainer,o=this.endOffset,c=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(i=e,o=e.length,e.appendData(t.data),m(t))},u=function(e){var n=e.previousSibling;if(n&&n.nodeType==e.nodeType){t=e;var a=e.length;if(r=n.length,e.insertData(0,n.data),m(n),t==i)o+=r,i=t;else if(i==e.parentNode){var c=s(e);o==c?(i=e,o=a):o>c&&o--}}},l=!0;if(a(i))o==i.length?c(i):0==o&&(e=i.previousSibling)&&e.nodeType==i.nodeType&&(o=e.length,t==i&&(l=!1),e.appendData(i.data),m(i),i=e);else{if(o>0){var f=i.childNodes[o-1];f&&a(f)&&c(f)}l=!this.collapsed}if(l){if(a(t))0==r?u(t):r==t.length&&(e=t.nextSibling)&&e.nodeType==t.nodeType&&(i==e&&(i=t,o+=t.length),t.appendData(e.data),m(e));else if(r<t.childNodes.length){var d=t.childNodes[r];d&&a(d)&&u(d)}}else t=i,r=o;n(this,t,r,i,o)},collapseToPoint:function(e,t){D(e,!0),H(e,t),this.setStartAndEnd(e,t)}}),ee(t)}function re(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:n.getCommonAncestor(e.startContainer,e.endContainer)}function ie(e,t,r,i,o){e.startContainer=t,e.startOffset=r,e.endContainer=i,e.endOffset=o,e.document=n.getDocument(t),re(e)}function oe(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,re(this)}r.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){var n,r,i,o;G(this),W(this.startContainer,t.startContainer);var a=3==e||0==e?"start":"end",s=1==e||0==e?"start":"end";return n=this[a+"Container"],r=this[a+"Offset"],i=t[s+"Container"],o=t[s+"Offset"],l(n,r,i,o)},insertNode:function(e){if(G(this),j(e,M),V(this.startContainer),c(e,this.startContainer))throw new o("HIERARCHY_REQUEST_ERR");var t=w(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var e,t;if(G(this),this.collapsed)return b(this).createDocumentFragment();if(this.startContainer===this.endContainer&&a(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=b(this).createDocumentFragment()).appendChild(e),t;var n=new _(this,!0);return e=E(n),n.detach(),e},canSurroundContents:function(){G(this),V(this.startContainer),V(this.endContainer);var e=new _(this,!0),t=e._first&&y(e._first,this)||e._last&&y(e._last,this);return e.detach(),!t},surroundContents:function(e){if(j(e,B),!this.canSurroundContents())throw new o("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);w(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){G(this);for(var e,t=new oe(b(this)),n=Z.length;n--;)t[e=Z[n]]=this[e];return t},toString:function(){G(this);var e=this.startContainer;if(e===this.endContainer&&a(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new _(this,!0);return N(n,(function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)})),n.detach(),t.join("")},compareNode:function(e){G(this);var t=e.parentNode,n=s(e);if(!t)throw new o("NOT_FOUND_ERR");var r=this.comparePoint(t,n),i=this.comparePoint(t,n+1);return r<0?i>0?2:0:i>0?1:3},comparePoint:function(e,t){return G(this),q(e,"HIERARCHY_REQUEST_ERR"),W(e,this.startContainer),l(e,t,this.startContainer,this.startOffset)<0?-1:l(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:Q,toHtml:function(){return X(this)},intersectsNode:function(e,t){if(G(this),p(e)!=p(this.startContainer))return!1;var n=e.parentNode,r=s(e);if(!n)return!0;var i=l(n,r,this.endContainer,this.endOffset),o=l(n,r+1,this.startContainer,this.startOffset);return t?i<=0&&o>=0:i<0&&o>0},isPointInRange:function(e,t){return G(this),q(e,"HIERARCHY_REQUEST_ERR"),W(e,this.startContainer),l(e,t,this.startContainer,this.startOffset)>=0&&l(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return R(this,e,!1)},intersectsOrTouchesRange:function(e){return R(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=l(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=l(this.endContainer,this.endOffset,e.endContainer,e.endOffset),r=this.cloneRange();return-1==t&&r.setStart(e.startContainer,e.startOffset),1==n&&r.setEnd(e.endContainer,e.endOffset),r}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==l(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==l(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new o("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):3==this.compareNode(e)},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,h(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var r=n.pop();return t.setEnd(r,r.length),this.containsRange(t)}return this.containsNodeContents(e)},getNodes:function(e,t){return G(this),function(e,t,n){var r,i=!(!t||!t.length),o=!!n;i&&(r=new RegExp("^("+t.join("|")+")$"));var s=[];return N(new _(e,!1),(function(t){if((!i||r.test(t.nodeType))&&(!o||n(t))){var c=e.startContainer;if(t!=c||!a(c)||e.startOffset!=c.length){var u=e.endContainer;t==u&&a(u)&&0==e.endOffset||s.push(t)}}})),s}(this,e,t)},getDocument:function(){return b(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var r=b(this),i=e.createRange(r);t=t||n.getBody(r),i.selectNodeContents(t);var o=this.intersection(i),a=0,s=0;return o&&(i.setEnd(o.startContainer,o.startOffset),s=(a=i.toString().length)+o.toString().length),{start:a,end:s,containerNode:t}},moveToBookmark:function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var r,i,o,a,s=[t],c=!1,u=!1;!u&&(r=s.pop());)if(3==r.nodeType)i=n+r.length,!c&&e.start>=n&&e.start<=i&&(this.setStart(r,e.start-n),c=!0),c&&e.end>=n&&e.end<=i&&(this.setEnd(r,e.end-n),u=!0),n=i;else for(o=(a=r.childNodes).length;o--;)s.push(a[o])},getName:function(){return"DomRange"},equals:function(e){return oe.rangesEqual(this,e)},isValid:function(){return U(this)},inspect:function(){return O(this)},detach:function(){}}),ne(oe,ie),r.extend(oe,{rangeProperties:Z,RangeIterator:_,copyComparisonConstants:ee,createPrototypeRange:ne,inspect:O,toHtml:X,getRangeDocument:b,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=oe})),S.createCoreModule("WrappedRange",["DomRange"],(function(e,t){var n,r,i=e.dom,o=e.util,a=i.DomPosition,s=e.DomRange,c=i.getBody,u=i.getContentDocument,l=i.isCharacterDataNode;if(e.features.implementsDomRange&&function(){var r,a,l=s.rangeProperties;function f(e){for(var t,n=l.length;n--;)e[t=l[n]]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,f(this)},s.createPrototypeRange(n,(function(e,t,n,r,i){var o=e.startContainer!==t||e.startOffset!=n,a=e.endContainer!==r||e.endOffset!=i,s=!e.equals(e.nativeRange);(o||a||s)&&(e.setEnd(r,i),e.setStart(t,n))})),(r=n.prototype).selectNode=function(e){this.nativeRange.selectNode(e),f(this)},r.cloneContents=function(){return this.nativeRange.cloneContents()},r.surroundContents=function(e){this.nativeRange.surroundContents(e),f(this)},r.collapse=function(e){this.nativeRange.collapse(e),f(this)},r.cloneRange=function(){return new n(this.nativeRange.cloneRange())},r.refresh=function(){f(this)},r.toString=function(){return this.nativeRange.toString()};var d=document.createTextNode("test");c(document).appendChild(d);var h=document.createRange();h.setStart(d,0),h.setEnd(d,0);try{h.setStart(d,1),r.setStart=function(e,t){this.nativeRange.setStart(e,t),f(this)},r.setEnd=function(e,t){this.nativeRange.setEnd(e,t),f(this)},a=function(e){return function(t){this.nativeRange[e](t),f(this)}}}catch(e){r.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}f(this)},r.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}f(this)},a=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(r){this.nativeRange[t](n),this.nativeRange[e](n)}f(this)}}}r.setStartBefore=a("setStartBefore","setEndBefore"),r.setStartAfter=a("setStartAfter","setEndAfter"),r.setEndBefore=a("setEndBefore","setStartBefore"),r.setEndAfter=a("setEndAfter","setStartAfter"),r.selectNodeContents=function(e){this.setStartAndEnd(e,0,i.getNodeLength(e))},h.selectNodeContents(d),h.setEnd(d,3);var g=document.createRange();g.selectNodeContents(d),g.setEnd(d,4),g.setStart(d,2),-1==h.compareBoundaryPoints(h.START_TO_END,g)&&1==h.compareBoundaryPoints(h.END_TO_START,g)?r.compareBoundaryPoints=function(e,t){return e==(t=t.nativeRange||t).START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:r.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var p=document.createElement("div");p.innerHTML="123";var v=p.firstChild,m=c(document);m.appendChild(p),h.setStart(v,1),h.setEnd(v,2),h.deleteContents(),"13"==v.data&&(r.deleteContents=function(){this.nativeRange.deleteContents(),f(this)},r.extractContents=function(){var e=this.nativeRange.extractContents();return f(this),e}),m.removeChild(p),m=null,o.isHostMethod(h,"createContextualFragment")&&(r.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),c(document).removeChild(d),r.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return(e=u(e,t,"createNativeRange")).createRange()}}(),e.features.implementsTextRange){var f=function(e,t,n,r,o){var s=e.duplicate();s.collapse(n);var c=s.parentElement();if(i.isOrIsAncestorOf(t,c)||(c=t),!c.canHaveHTML){var u=new a(c.parentNode,i.getNodeIndex(c));return{boundaryPosition:u,nodeInfo:{nodeIndex:u.offset,containerElement:u.node}}}var f=i.getDocument(c).createElement("span");f.parentNode&&i.removeNode(f);for(var d,h,g,p,v,m=n?"StartToStart":"StartToEnd",y=o&&o.containerElement==c?o.nodeIndex:0,b=c.childNodes.length,S=b,C=S;C==b?c.appendChild(f):c.insertBefore(f,c.childNodes[C]),s.moveToElementText(f),0!=(d=s.compareEndPoints(m,e))&&y!=S;){if(-1==d){if(S==y+1)break;y=C}else S=S==y+1?y:C;C=Math.floor((y+S)/2),c.removeChild(f)}if(v=f.nextSibling,-1==d&&v&&l(v)){var w;if(s.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(v.data)){var R=s.duplicate(),E=R.text.replace(/\r\n/g,"\r").length;for(w=R.moveStart("character",E);-1==(d=R.compareEndPoints("StartToEnd",R));)w++,R.moveStart("character",1)}else w=s.text.length;p=new a(v,w)}else h=(r||!n)&&f.previousSibling,p=(g=(r||n)&&f.nextSibling)&&l(g)?new a(g,0):h&&l(h)?new a(h,h.data.length):new a(c,i.getNodeIndex(f));return i.removeNode(f),{boundaryPosition:p,nodeInfo:{nodeIndex:C,containerElement:c}}},d=function(e,t){var n,r,o,a,s=e.offset,u=i.getDocument(e.node),f=c(u).createTextRange(),d=l(e.node);return d?r=(n=e.node).parentNode:(n=s<(a=e.node.childNodes).length?a[s]:null,r=e.node),(o=u.createElement("span")).innerHTML="&#feff;",n?r.insertBefore(o,n):r.appendChild(o),f.moveToElementText(o),f.collapse(!t),r.removeChild(o),d&&f[t?"moveStart":"moveEnd"]("character",s),f};(r=function(e){this.textRange=e,this.refresh()}).prototype=new s(document),r.prototype.refresh=function(){var e,t,n,r,o=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var r=n.parentElement();(n=e.duplicate()).collapse(!1);var o=n.parentElement(),a=r==o?r:i.getCommonAncestor(r,o);return a==t?a:i.getCommonAncestor(t,a)}(this.textRange);0==(r=this.textRange).compareEndPoints("StartToEnd",r)?t=e=f(this.textRange,o,!0,!0).boundaryPosition:(e=(n=f(this.textRange,o,!0,!1)).boundaryPosition,t=f(this.textRange,o,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},r.prototype.getName=function(){return"WrappedTextRange"},s.copyComparisonConstants(r);var h=function(e){if(e.collapsed)return d(new a(e.startContainer,e.startOffset),!0);var t=d(new a(e.startContainer,e.startOffset),!0),n=d(new a(e.endContainer,e.endOffset),!1),r=c(s.getRangeDocument(e)).createTextRange();return r.setEndPoint("StartToStart",t),r.setEndPoint("EndToEnd",n),r};if(r.rangeToTextRange=h,r.prototype.toTextRange=function(){return h(this)},e.WrappedTextRange=r,!e.features.implementsDomRange||e.config.preferTextRange){var g=Function("return this;")();void 0===g.Range&&(g.Range=r),e.createNativeRange=function(e){return e=u(e,t,"createNativeRange"),c(e).createTextRange()},e.WrappedRange=r}}e.createRange=function(n){return n=u(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return e=u(e,t,"createRangyRange"),new s(e)},o.createAliasForDeprecatedMethod(e,"createIframeRange","createRange"),o.createAliasForDeprecatedMethod(e,"createIframeRangyRange","createRangyRange"),e.addShimListener((function(t){var n=t.document;void 0===n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null}))})),S.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],(function(e,t){e.config.checkSelectionRanges=!0;var n,r,i="boolean",o="number",a=e.dom,s=e.util,c=s.isHostMethod,u=e.DomRange,l=e.WrappedRange,f=e.DOMException,d=a.DomPosition,h=e.features,g="Control",p=a.getDocument,v=a.getBody,m=u.rangesEqual;function y(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function b(e,n){if(e){if(a.isWindow(e))return e;if(e instanceof U)return e.win;var r=a.getContentDocument(e,t,n);return a.getWindow(r)}return window}function S(e){return b(e,"getDocSelection").document.selection}function C(e){var t=!1;return e.anchorNode&&(t=1==a.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}var w=c(window,"getSelection"),R=s.isHostObject(document,"selection");h.implementsWinGetSelection=w,h.implementsDocSelection=R;var E=R&&(!w||e.config.preferTextRange);if(E)n=S,e.isSelectionValid=function(e){var t=b(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||p(n.createRange().parentElement())==t};else{if(!w)return t.fail("Neither document.selection or window.getSelection() detected."),!1;n=function(e){return b(e,"getWinSelection").getSelection()},e.isSelectionValid=function(){return!0}}e.getNativeSelection=n;var N=n();if(!N)return t.fail("Native selection was null (possibly issue 138?)"),!1;var A=e.createNativeRange(document),k=v(document),O=s.areHostProperties(N,["anchorNode","focusNode","anchorOffset","focusOffset"]);h.selectionHasAnchorAndFocus=O;var _=c(N,"extend");h.selectionHasExtend=_;var T=typeof N.rangeCount==o;h.selectionHasRangeCount=T;var x=!1,M=!0,B=_?function(t,n){var r=u.getRangeDocument(n),i=e.createRange(r);i.collapseToPoint(n.endContainer,n.endOffset),t.addRange(j(i)),t.extend(n.startContainer,n.startOffset)}:null;s.areHostMethods(N,["addRange","getRangeAt","removeAllRanges"])&&typeof N.rangeCount==o&&h.implementsDomRange&&function(){var t=window.getSelection();if(t){for(var n=t.rangeCount,r=n>1,i=[],o=C(t),s=0;s<n;++s)i[s]=t.getRangeAt(s);var c=a.createTestElement(document,"",!1),u=c.appendChild(document.createTextNode("")),l=document.createRange();if(l.setStart(u,1),l.collapse(!0),t.removeAllRanges(),t.addRange(l),M=1==t.rangeCount,t.removeAllRanges(),!r){var f=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(f&&parseInt(f[1])>=36)x=!1;else{var d=l.cloneRange();l.setStart(u,0),d.setEnd(u,3),d.setStart(u,2),t.addRange(l),t.addRange(d),x=2==t.rangeCount}}for(a.removeNode(c),t.removeAllRanges(),s=0;s<n;++s)0==s&&o?B?B(t,i[s]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(i[s])):t.addRange(i[s])}}(),h.selectionSupportsMultipleRanges=x,h.collapsedNonEditableSelectionsSupported=M;var P,L,F=!1;function I(e,t,n){var r=n?"end":"start",i=n?"start":"end";e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[i+"Container"],e.focusOffset=t[i+"Offset"]}function D(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function j(t){var n;return t instanceof u?((n=e.createNativeRange(t.getDocument())).setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof l?n=t.nativeRange:h.implementsDomRange&&t instanceof a.getWindow(t.startContainer).Range&&(n=t),n}function H(e){var n=e.getNodes();if(!function(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;t<n;++t)if(!a.isAncestorOf(e[0],e[t]))return!1;return!0}(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function W(e){return!!e&&void 0!==e.text}function V(e,t){var n=new l(t);e._ranges=[n],I(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function q(t){if(t._ranges.length=0,"None"==t.docSelection.type)D(t);else{var n=t.docSelection.createRange();if(W(n))V(t,n);else{t.rangeCount=n.length;for(var r,i=p(n.item(0)),o=0;o<t.rangeCount;++o)(r=e.createRange(i)).selectNode(n.item(o)),t._ranges.push(r);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,I(t,t._ranges[t.rangeCount-1],!1)}}}function z(e,n){for(var r=e.docSelection.createRange(),i=H(n),o=p(r.item(0)),a=v(o).createControlRange(),s=0,c=r.length;s<c;++s)a.add(r.item(s));try{a.add(i)}catch(e){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}a.select(),q(e)}function U(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function G(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}k&&c(k,"createControlRange")&&(P=k.createControlRange(),s.areHostProperties(P,["item","add"])&&(F=!0)),h.implementsControlRange=F,r=O?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed},c(N,"getRangeAt")?L=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:O&&(L=function(t){var n=p(t.anchorNode),r=e.createRange(n);return r.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),r.collapsed!==this.isCollapsed&&r.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),r}),U.prototype=e.selectionPrototype;var K=[];function $(e,t){for(var n,r,i=K.length;i--;)if(r=(n=K[i]).selection,"deleteAll"==t)G(r);else if(n.win==e)return"delete"==t?(K.splice(i,1),!0):r;return"deleteAll"==t&&(K.length=0),null}var Q=function(e){if(e&&e instanceof U)return e.refresh(),e;var t=$(e=b(e,"getNativeSelection")),r=n(e),i=R?S(e):null;return t?(t.nativeSelection=r,t.docSelection=i,t.refresh()):(t=new U(r,i,e),K.push({win:e,selection:t})),t};e.getSelection=Q,s.createAliasForDeprecatedMethod(e,"getIframeSelection","getSelection");var Y,X=U.prototype;function Z(e,n){for(var r,i=p(n[0].startContainer),o=v(i).createControlRange(),a=0,s=n.length;a<s;++a){r=H(n[a]);try{o.add(r)}catch(e){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}o.select(),q(e)}if(!E&&O&&s.areHostMethods(N,["removeAllRanges","addRange"])){X.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),D(this)};var J=function(e,t){B(e.nativeSelection,t),e.refresh()};X.addRange=T?function(t,n){if(F&&R&&this.docSelection.type==g)z(this,t);else if(y(n)&&_)J(this,t);else{var i;x?i=this.rangeCount:(this.removeAllRanges(),i=0);var o=j(t).cloneRange();try{this.nativeSelection.addRange(o)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==i+1){if(e.config.checkSelectionRanges){var a=L(this.nativeSelection,this.rangeCount-1);a&&!m(a,t)&&(t=new l(a))}this._ranges[this.rangeCount-1]=t,I(this,t,ee(this.nativeSelection)),this.isCollapsed=r(this)}else this.refresh()}}:function(e,t){y(t)&&_?J(this,e):(this.nativeSelection.addRange(j(e)),this.refresh())},X.setRanges=function(e){if(F&&R&&e.length>1)Z(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(c(N,"empty")&&c(A,"select")&&F&&E))return t.fail("No means of selecting a Range or TextRange was found"),!1;X.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=p(this.anchorNode);else if(this.docSelection.type==g){var t=this.docSelection.createRange();t.length&&(e=p(t.item(0)))}e&&(v(e).createTextRange().select(),this.docSelection.empty())}}catch(e){}D(this)},X.addRange=function(t){this.docSelection.type==g?z(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,I(this,t,!1))},X.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?Z(this,e):t&&this.addRange(e[0])}}if(X.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new f("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},E)Y=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=v(t.win.document).createTextRange()).collapse(!0),t.docSelection.type==g?q(t):W(n)?V(t,n):D(t)};else if(c(N,"getRangeAt")&&typeof N.rangeCount==o)Y=function(t){if(F&&R&&t.docSelection.type==g)q(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,i=t.rangeCount;n<i;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));I(t,t._ranges[t.rangeCount-1],ee(t.nativeSelection)),t.isCollapsed=r(t)}else D(t)};else{if(!O||typeof N.isCollapsed!=i||typeof A.collapsed!=i||!h.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;Y=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=L(n,0),e._ranges=[t],e.rangeCount=1,function(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}(e),e.isCollapsed=r(e)):D(e)}}X.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,r=this.anchorOffset;if(Y(this),e){var i=t.length;if(i!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=r)return!0;for(;i--;)if(!m(t[i],this._ranges[i]))return!0;return!1}};var ee,te=function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var r=0,i=n.length;r<i;++r)m(t,n[r])||e.addRange(n[r]);e.rangeCount||D(e)};function ne(e,t){if(e.win.document!=p(t))throw new f("WRONG_DOCUMENT_ERR")}function re(t){return function(n,r){var i;this.rangeCount?(i=this.getRangeAt(0))["set"+(t?"Start":"End")](n,r):(i=e.createRange(this.win.document)).setStartAndEnd(n,r),this.setSingleRange(i,this.isBackward())}}function ie(e){var t=[],n=new d(e.anchorNode,e.anchorOffset),r=new d(e.focusNode,e.focusOffset),i="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var o=0,a=e.rangeCount;o<a;++o)t[o]=u.inspect(e.getRangeAt(o));return"["+i+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}X.removeRange=F&&R?function(e){if(this.docSelection.type==g){for(var t=this.docSelection.createRange(),n=H(e),r=p(t.item(0)),i=v(r).createControlRange(),o=!1,a=0,s=t.length;a<s;++a)t.item(a)!==n||o?i.add(t.item(a)):o=!0;i.select(),q(this)}else te(this,e)}:function(e){te(this,e)},!E&&O&&h.implementsDomRange?(ee=C,X.isBackward=function(){return ee(this)}):ee=X.isBackward=function(){return!1},X.isBackwards=X.isBackward,X.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},X.collapse=function(t,n){ne(this,t);var r=e.createRange(t);r.collapseToPoint(t,n),this.setSingleRange(r),this.isCollapsed=!0},X.collapseToStart=function(){if(!this.rangeCount)throw new f("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},X.collapseToEnd=function(){if(!this.rangeCount)throw new f("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},X.selectAllChildren=function(t){ne(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},X.deleteFromDocument=function(){if(F&&R&&this.docSelection.type==g){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),a.removeNode(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var r=0,i=n.length;r<i;++r)n[r].deleteContents();this.addRange(n[i-1])}}},X.eachRange=function(e,t){for(var n=0,r=this._ranges.length;n<r;++n)if(e(this.getRangeAt(n)))return t},X.getAllRanges=function(){var e=[];return this.eachRange((function(t){e.push(t)})),e},X.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},X.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange((function(r){n.push(r[e].apply(r,t||[]))})),n},X.setStart=re(!0),X.setEnd=re(!1),e.rangePrototype.select=function(e){Q(this.getDocument()).setSingleRange(this,e)},X.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange((function(n){e(n),t.push(n)})),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},X.containsNode=function(e,t){return this.eachRange((function(n){return n.containsNode(e,t)}),!0)||!1},X.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},X.moveToBookmark=function(t){for(var n,r,i=[],o=0;n=t.rangeBookmarks[o++];)(r=e.createRange(this.win)).moveToBookmark(n),i.push(r);t.backward?this.setSingleRange(i[0],"backward"):this.setRanges(i)},X.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},X.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},X.toHtml=function(){var e=[];return this.eachRange((function(t){e.push(u.toHtml(t))})),e.join("")},h.implementsTextRange&&(X.getNativeTextRange=function(){var n;if(n=this.docSelection){var r=n.createRange();if(W(r))return r;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),X.getName=function(){return"WrappedSelection"},X.inspect=function(){return ie(this)},X.detach=function(){$(this.win,"delete"),G(this)},U.detachAll=function(){$(null,"deleteAll")},U.inspect=ie,U.isDirectionBackward=y,e.Selection=U,e.selectionPrototype=X,e.addShimListener((function(e){void 0===e.getSelection&&(e.getSelection=function(){return Q(e)}),e=null}))}));var B=!1,P=function(e){B||(B=!0,!S.initialized&&S.config.autoInitialize&&A())};return y&&("complete"==document.readyState?P():(a(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",P,!1),v(window,"load",P))),S})?r.call(t,n,t,e):r)||(e.exports=i)},554:function(e,t,n){var r,i,o;i=[n(8)],void 0===(o="function"==typeof(r=function(e){return e.createModule("TextRange",["WrappedSelection"],(function(e,t){var n,r,i,o,a,s="character",c="word",u=e.dom,l=e.util,f=l.extend,d=l.createOptions,h=u.getBody,g=/^[ \t\f\r\n]+$/,p=/^[ \t\f\r]+$/,v=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,m=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,y="en",b=e.Selection.isDirectionBackward;function S(e,t){for(var n=e.slice(t.start,t.end),r={isWord:t.isWord,chars:n,toString:function(){return n.join("")}},i=0,o=n.length;i<o;++i)n[i].token=r;return r}function C(e,t,n){for(var r,i=n(e,t),o=[],a=0;r=i[a++];)o.push(S(e,r));return o}r=(n=u.createTestElement(document,"<p>1 </p><p></p>",!0)).firstChild,(i=e.getSelection()).collapse(r.lastChild,2),i.setStart(r.firstChild,0),n.innerHTML="1 <br />",i.collapse(n,2),i.setStart(n.firstChild,0),o=1==(""+i).length,n.innerHTML="1 <p>1</p>",i.collapse(n,2),i.setStart(n.firstChild,0),a=1==(""+i).length,u.removeNode(n),i.removeAllRanges();var w={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""};var R={includeBlockContentTrailingSpace:!1,includeSpaceBeforeBr:!o,includeSpaceBeforeBlock:!a,includePreLineTrailingSpace:!0},E={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:function(e,t){var n,r=e.join(""),i=[];function o(e,t,n){i.push({start:e,end:t,isWord:n})}for(var a,s,c=0;n=t.wordRegex.exec(r);){if(s=(a=n.index)+n[0].length,a>c&&o(c,a,!1),t.includeTrailingSpace)for(;m.test(e[s]);)++s;o(a,s,!0),c=s}return c<e.length&&o(c,e.length,!1),i}}},N={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},A={wordOptions:null,characterOptions:null},k={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},O={wordOptions:null,characterOptions:null,direction:"forward"};function _(e,t){var n=d(e,t);return t.hasOwnProperty("wordOptions")&&(n.wordOptions=function(e){var t,n;return e?(t=e.language||y,f(n={},E[t]||E.en),f(n,e),n):E.en}(n.wordOptions)),t.hasOwnProperty("characterOptions")&&(n.characterOptions=d(n.characterOptions,w)),n}var T,x,M,B=u.getComputedStyleProperty;x=document.createElement("table"),(M=h(document)).appendChild(x),T="block"==B(x,"display"),M.removeChild(x);var P={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};function L(e,t){var n=B(e,"display",t),r=e.tagName.toLowerCase();return"block"==n&&T&&P.hasOwnProperty(r)?P[r]:n}function F(e){for(var t=function(e){return function(e){for(var t=[];e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t}(e).concat([e])}(e),n=0,r=t.length;n<r;++n)if(1==t[n].nodeType&&"none"==L(t[n]))return!0;return!1}function I(e,t){return!t&&e.hasChildNodes()?e.firstChild:function(e){for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null}(e)}function D(e){var t=e.previousSibling;if(t){for(e=t;e.hasChildNodes();)e=e.lastChild;return e}var n=e.parentNode;return n&&1==n.nodeType?n:null}function j(e){if(!e||3!=e.nodeType)return!1;var t=e.data;if(""===t)return!0;var n=e.parentNode;if(!n||1!=n.nodeType)return!1;var r=B(e.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(t)&&/^(normal|nowrap)$/.test(r)||/^[\t\r ]+$/.test(t)&&"pre-line"==r}function H(e){return""===e.data||!!j(e)&&(!e.parentNode||!!F(e))}function W(e){var t=e.nodeType;return 7==t||8==t||F(e)||/^(script|style)$/i.test(e.nodeName)||function(e){var t;return 3==e.nodeType&&(t=e.parentNode)&&"hidden"==B(t,"visibility")}(e)||H(e)}function V(e,t){var n=e.nodeType;return 7==n||8==n||1==n&&"none"==L(e,t)}function q(){this.store={}}function z(e,t,n){return function(r){var i=this.cache;if(i.hasOwnProperty(e))return i[e];var o=t.call(this,n?this[n]:this,r);return i[e]=o,o}}function U(e,t){this.node=e,this.session=t,this.cache=new q,this.positions=new q}q.prototype={get:function(e){return this.store.hasOwnProperty(e)?this.store[e]:null},set:function(e,t){return this.store[e]=t}};var G={getPosition:function(e){var t=this.positions;return t.get(e)||t.set(e,new ne(this,e))},toString:function(){return"[NodeWrapper("+u.inspectNode(this.node)+")]"}};U.prototype=G;var K="EMPTY",$="NON_SPACE",Q="UNCOLLAPSIBLE_SPACE",Y="COLLAPSIBLE_SPACE",X="TRAILING_SPACE_BEFORE_BLOCK",Z="TRAILING_SPACE_IN_BLOCK",J="TRAILING_SPACE_BEFORE_BR",ee="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",te="INCLUDED_TRAILING_LINE_BREAK_AFTER_BR";function ne(e,t){this.offset=t,this.nodeWrapper=e,this.node=e.node,this.session=e.session,this.cache=new q}f(G,{isCharacterDataNode:z("isCharacterDataNode",u.isCharacterDataNode,"node"),getNodeIndex:z("nodeIndex",u.getNodeIndex,"node"),getLength:z("nodeLength",u.getNodeLength,"node"),containsPositions:z("containsPositions",(function(e){return u.isCharacterDataNode(e)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(e.nodeName)}),"node"),isWhitespace:z("isWhitespace",j,"node"),isCollapsedWhitespace:z("isCollapsedWhitespace",H,"node"),getComputedDisplay:z("computedDisplay",L,"node"),isCollapsed:z("collapsed",W,"node"),isIgnored:z("ignored",V,"node"),next:z("nextPos",I,"node"),previous:z("previous",D,"node"),getTextNodeInfo:z("textNodeInfo",(function(e){var t=null,n=!1,r=B(e.parentNode,"whiteSpace"),i="pre-line"==r;return i?(t=p,n=!0):"normal"!=r&&"nowrap"!=r||(t=g,n=!0),{node:e,text:e.data,spaceRegex:t,collapseSpaces:n,preLine:i}}),"node"),hasInnerText:z("hasInnerText",(function(e,t){for(var n=this.session,r=n.getPosition(e.parentNode,this.getNodeIndex()+1),i=n.getPosition(e,0),o=t?r:i,a=t?i:r;o!==a;){if(o.prepopulateChar(),o.isDefinitelyNonEmpty())return!0;o=t?o.previousVisible():o.nextVisible()}return!1}),"node"),isRenderedBlock:z("isRenderedBlock",(function(e){for(var t=e.getElementsByTagName("br"),n=0,r=t.length;n<r;++n)if(!W(t[n]))return!0;return this.hasInnerText()}),"node"),getTrailingSpace:z("trailingSpace",(function(e){if("br"==e.tagName.toLowerCase())return"";switch(this.getComputedDisplay()){case"inline":for(var t=e.lastChild;t;){if(!V(t))return 1==t.nodeType?this.session.getNodeWrapper(t).getTrailingSpace():"";t=t.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"\t";default:return this.isRenderedBlock(!0)?"\n":""}return""}),"node"),getLeadingSpace:z("leadingSpace",(function(e){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?"\n":""}return""}),"node")});var re={character:"",characterType:K,isBr:!1,prepopulateChar:function(){var e=this;if(!e.prepopulatedChar){var t=e.node,n=e.offset,r="",i=K,o=!1;if(n>0)if(3==t.nodeType){var a=t.data,s=a.charAt(n-1),c=e.nodeWrapper.getTextNodeInfo(),u=c.spaceRegex;c.collapseSpaces?u.test(s)?n>1&&u.test(a.charAt(n-2))||(c.preLine&&"\n"===a.charAt(n)?(r=" ",i=ee):(r=" ",i=Y)):(r=s,i=$,o=!0):(r=s,i=Q,o=!0)}else{var l=t.childNodes[n-1];if(l&&1==l.nodeType&&!W(l)&&("br"==l.tagName.toLowerCase()?(r="\n",e.isBr=!0,i=Y,o=!1):e.checkForTrailingSpace=!0),!r){var f=t.childNodes[n];f&&1==f.nodeType&&!W(f)&&(e.checkForLeadingSpace=!0)}}e.prepopulatedChar=!0,e.character=r,e.characterType=i,e.isCharInvariant=o}},isDefinitelyNonEmpty:function(){var e=this.characterType;return e==$||e==Q},resolveLeadingAndTrailingSpaces:function(){if(this.prepopulatedChar||this.prepopulateChar(),this.checkForTrailingSpace){var e=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();e&&(this.isTrailingSpace=!0,this.character=e,this.characterType=Y),this.checkForTrailingSpace=!1}if(this.checkForLeadingSpace){var t=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();t&&(this.isLeadingSpace=!0,this.character=t,this.characterType=Y),this.checkForLeadingSpace=!1}},getPrecedingUncollapsedPosition:function(e){for(var t=this;t=t.previousVisible();)if(""!==t.getCharacter(e))return t;return null},getCharacter:function(e){this.resolveLeadingAndTrailingSpaces();var t=this.character,n=function(e){var t=e||"",n="string"==typeof t?t.split(""):t;return n.sort((function(e,t){return e.charCodeAt(0)-t.charCodeAt(0)})),n.join("").replace(/(.)\1+/g,"$1")}(e.ignoreCharacters),r=""!==t&&n.indexOf(t)>-1;if(this.isCharInvariant)return r?"":t;var i=["character",e.includeSpaceBeforeBr,e.includeBlockContentTrailingSpace,e.includePreLineTrailingSpace,n].join("_"),o=this.cache.get(i);if(null!==o)return o;var a,s,c="",u=this.characterType==Y,l=!1,f=this;function d(){return l||(s=f.getPrecedingUncollapsedPosition(e),l=!0),s}return u&&(this.type==te?c="\n":" "==t&&(!d()||s.isTrailingSpace||"\n"==s.character||" "==s.character&&s.characterType==Y)||("\n"==t&&this.isLeadingSpace?d()&&"\n"!=s.character&&(c="\n"):(a=this.nextUncollapsed())&&(a.isBr?this.type=J:a.isTrailingSpace&&"\n"==a.character?this.type=Z:a.isLeadingSpace&&"\n"==a.character&&(this.type=X),"\n"==a.character?(this.type!=J||e.includeSpaceBeforeBr)&&(this.type!=X||e.includeSpaceBeforeBlock)&&(this.type==Z&&a.isTrailingSpace&&!e.includeBlockContentTrailingSpace||(this.type!=ee||a.type!=$||e.includePreLineTrailingSpace)&&("\n"==t?a.isTrailingSpace?this.isTrailingSpace||this.isBr&&(a.type="TRAILING_LINE_BREAK_AFTER_BR",d()&&s.isLeadingSpace&&!s.isTrailingSpace&&"\n"==s.character?a.character="":a.type=te):c="\n":" "==t&&(c=" "))):c=t))),n.indexOf(c)>-1&&(c=""),this.cache.set(i,c),c},equals:function(e){return!!e&&this.node===e.node&&this.offset===e.offset},inspect:function(){return"[Position("+u.inspectNode(this.node)+":"+this.offset+")]"},toString:function(){return this.character}};ne.prototype=re,f(re,{next:z("nextPos",(function(e){var t,n,r,i=e.nodeWrapper,o=e.node,a=e.offset,s=i.session;return o?(a==i.getLength()?n=(t=o.parentNode)?i.getNodeIndex()+1:0:i.isCharacterDataNode()?(t=o,n=a+1):(r=o.childNodes[a],s.getNodeWrapper(r).containsPositions()?(t=r,n=0):(t=o,n=a+1)),t?s.getPosition(t,n):null):null})),previous:z("previous",(function(e){var t,n,r,i=e.nodeWrapper,o=e.node,a=e.offset,s=i.session;return 0==a?n=(t=o.parentNode)?i.getNodeIndex():0:i.isCharacterDataNode()?(t=o,n=a-1):(r=o.childNodes[a-1],s.getNodeWrapper(r).containsPositions()?(t=r,n=u.getNodeLength(r)):(t=o,n=a-1)),t?s.getPosition(t,n):null})),nextVisible:z("nextVisible",(function(e){var t=e.next();if(!t)return null;var n=t.nodeWrapper,r=t.node,i=t;return n.isCollapsed()&&(i=n.session.getPosition(r.parentNode,n.getNodeIndex()+1)),i})),nextUncollapsed:z("nextUncollapsed",(function(e){for(var t=e;t=t.nextVisible();)if(t.resolveLeadingAndTrailingSpaces(),""!==t.character)return t;return null})),previousVisible:z("previousVisible",(function(e){var t=e.previous();if(!t)return null;var n=t.nodeWrapper,r=t.node,i=t;return n.isCollapsed()&&(i=n.session.getPosition(r.parentNode,n.getNodeIndex())),i}))});var ie=null,oe=function(){function e(e){var t=new q;return{get:function(n){var r=t.get(n[e]);if(r)for(var i,o=0;i=r[o++];)if(i.node===n)return i;return null},set:function(n){var r=n.node[e];(t.get(r)||t.set(r,[])).push(n)}}}var t=l.isHostProperty(document.documentElement,"uniqueID");function n(){this.initCaches()}return n.prototype={initCaches:function(){var n;this.elementCache=t?(n=new q,{get:function(e){return n.get(e.uniqueID)},set:function(e){n.set(e.node.uniqueID,e)}}):e("tagName"),this.textNodeCache=e("data"),this.otherNodeCache=e("nodeName")},getNodeWrapper:function(e){var t;switch(e.nodeType){case 1:t=this.elementCache;break;case 3:t=this.textNodeCache;break;default:t=this.otherNodeCache}var n=t.get(e);return n||(n=new U(e,this),t.set(n)),n},getPosition:function(e,t){return this.getNodeWrapper(e).getPosition(t)},getRangeBoundaryPosition:function(e,t){var n=t?"start":"end";return this.getPosition(e[n+"Container"],e[n+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},n}();function ae(){return ie||(se(),ie=new oe)}function se(){ie&&ie.detach(),ie=null}function ce(e,n,r,i){r&&(n?W(r.node)&&(r=e.previousVisible()):W(r.node)&&(r=r.nextVisible()));var o=e,a=!1;function s(){var e=null;return n?(e=o,a||(o=o.previousVisible(),a=!o||r&&o.equals(r))):a||(e=o=o.nextVisible(),a=!o||r&&o.equals(r)),a&&(o=null),e}var c,u=!1;return{next:function(){if(u)return u=!1,c;for(var e;e=s();)if(e.getCharacter(i))return c=e,e;return null},rewind:function(){if(!c)throw t.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");u=!0},dispose:function(){e=r=null}}}f(u,{nextNode:I,previousNode:D});var ue=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1};function le(e,t,n){var r=ce(e,!1,null,t),i=ce(e,!0,null,t),o=n.tokenizer;function a(e){for(var t,n,o=[],a=e?r:i,s=!1,c=!1;t=a.next();){if(n=t.character,v.test(n))c&&(c=!1,s=!0);else{if(s){a.rewind();break}c=!0}o.push(t)}return o}var s=a(!0),c=a(!1).reverse(),u=C(c.concat(s),n,o),l=s.length?u.slice(ue(u,s[0].token)):[],f=c.length?u.slice(0,ue(u,c.pop().token)+1):[];return{nextEndToken:function(){for(var e,t;1==l.length&&!(e=l[0]).isWord&&(t=a(!0)).length>0;)l=C(e.chars.concat(t),n,o);return l.shift()},previousStartToken:function(){for(var e,t;1==f.length&&!(e=f[0]).isWord&&(t=a(!1)).length>0;)f=C(t.reverse().concat(e.chars),n,o);return f.pop()},dispose:function(){r.dispose(),i.dispose(),l=f=null}}}function fe(e,t,n,r){var i=e.getRangeBoundaryPosition(t,!0),o=e.getRangeBoundaryPosition(t,!1);return ce(r?o:i,!!r,r?i:o,n)}function de(t,n,r){var i=e.createRange(t.node);return i.setStartAndEnd(t.node,t.offset,n.node,n.offset),!i.expand("word",{wordOptions:r})}function he(e,t,n,r,i){var o,a,s,c,u,l,f=b(i.direction),d=ce(e,f,e.session.getRangeBoundaryPosition(r,f),i.characterOptions),h="",g=[],p=null;function v(e,t){var n=g[e].previousVisible(),r=g[t-1];return{startPos:n,endPos:r,valid:!i.wholeWordsOnly||de(n,r,i.wordOptions)}}for(;o=d.next();)if(a=o.character,n||i.caseSensitive||(a=a.toLowerCase()),f?(g.unshift(o),h=a+h):(g.push(o),h+=a),n){if(u=t.exec(h))if(c=(s=u.index)+u[0].length,l){if(!f&&c<h.length||f&&s>0){p=v(s,c);break}}else l=!0}else if(-1!=(s=h.indexOf(t))){p=v(s,s+t.length);break}return l&&(p=v(s,c)),d.dispose(),p}function ge(e){return function(){var t=!!ie,n=[ae()].concat(l.toArray(arguments)),r=e.apply(this,n);return t||se(),r}}function pe(e,t){return ge((function(n,r,i,o){void 0===i&&(i=r,r=s),o=_(o,A);var a=e;t&&(a=i>=0,this.collapse(!a));var u=function(e,t,n,r,i){var o,a,u,l,f=0,d=e,h=Math.abs(n);if(0!==n){var g=n<0;switch(t){case s:for(a=ce(e,g,null,r);(o=a.next())&&f<h;)++f,d=o;u=o,a.dispose();break;case c:for(var p=le(e,r,i),v=g?p.previousStartToken:p.nextEndToken;(l=v())&&f<h;)l.isWord&&(++f,d=g?l.chars[0]:l.chars[l.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+t+"' not implemented")}g?(d=d.previousVisible(),f=-f):d&&d.isLeadingSpace&&!d.isTrailingSpace&&(t==c&&(u=(a=ce(e,!1,null,r)).next(),a.dispose()),u&&(d=u.previousVisible()))}return{position:d,unitsMoved:f}}(n.getRangeBoundaryPosition(this,a),r,i,o.characterOptions,o.wordOptions),l=u.position;return this[a?"setStart":"setEnd"](l.node,l.offset),u.unitsMoved}))}function ve(e){return ge((function(t,n){for(var r,i=fe(t,this,n=d(n,w),!e),o=0;(r=i.next())&&v.test(r.character);)++o;i.dispose();var a=o>0;return a&&this[e?"moveStart":"moveEnd"]("character",e?o:-o,{characterOptions:n}),a}))}function me(e){return ge((function(t,n){var r=!1;return this.changeEachRange((function(t){r=t[e](n)||r})),r}))}f(e.rangePrototype,{moveStart:pe(!0,!1),moveEnd:pe(!1,!1),move:pe(!0,!0),trimStart:ve(!0),trimEnd:ve(!1),trim:ge((function(e,t){var n=this.trimStart(t),r=this.trimEnd(t);return n||r})),expand:ge((function(e,t,n){var r=!1,i=(n=_(n,k)).characterOptions;if(t||(t=s),t==c){var o,a,u=n.wordOptions,l=e.getRangeBoundaryPosition(this,!0),f=e.getRangeBoundaryPosition(this,!1),d=le(l,i,u).nextEndToken(),h=d.chars[0].previousVisible();return a=(o=this.collapsed?d:le(f,i,u).previousStartToken()).chars[o.chars.length-1],h.equals(l)||(this.setStart(h.node,h.offset),r=!0),a&&!a.equals(f)&&(this.setEnd(a.node,a.offset),r=!0),n.trim&&(n.trimStart&&(r=this.trimStart(i)||r),n.trimEnd&&(r=this.trimEnd(i)||r)),r}return this.moveEnd(s,1,n)})),text:ge((function(e,t){return this.collapsed?"":function(e,t,n){for(var r,i=[],o=fe(e,t,n);r=o.next();)i.push(r);return o.dispose(),i}(e,this,d(t,w)).join("")})),selectCharacters:ge((function(e,t,n,r,i){var o={characterOptions:i};t||(t=h(this.getDocument())),this.selectNodeContents(t),this.collapse(!0),this.moveStart("character",n,o),this.collapse(!0),this.moveEnd("character",r-n,o)})),toCharacterRange:ge((function(e,t,n){t||(t=h(this.getDocument()));var r,i=t.parentNode,o=u.getNodeIndex(t),a=-1==u.comparePoints(this.startContainer,this.endContainer,i,o),s=this.cloneRange();return a?(s.setStartAndEnd(this.startContainer,this.startOffset,i,o),r=-s.text(n).length):(s.setStartAndEnd(i,o,this.startContainer,this.startOffset),r=s.text(n).length),{start:r,end:r+this.text(n).length}})),findText:ge((function(t,n,r){(r=_(r,N)).wholeWordsOnly&&(r.wordOptions.includeTrailingSpace=!1);var i=b(r.direction),o=r.withinRange;o||(o=e.createRange()).selectNodeContents(this.getDocument());var a=n,s=!1;"string"==typeof a?r.caseSensitive||(a=a.toLowerCase()):s=!0;var c=t.getRangeBoundaryPosition(this,!i),u=o.comparePoint(c.node,c.offset);-1===u?c=t.getRangeBoundaryPosition(o,!0):1===u&&(c=t.getRangeBoundaryPosition(o,!1));for(var l,f=c,d=!1;;)if(l=he(f,a,s,o,r)){if(l.valid)return this.setStartAndEnd(l.startPos.node,l.startPos.offset,l.endPos.node,l.endPos.offset),!0;f=i?l.startPos:l.endPos}else{if(!r.wrap||d)return!1;o=o.cloneRange(),f=t.getRangeBoundaryPosition(o,!i),o.setBoundary(c.node,c.offset,i),d=!0}})),pasteHtml:function(e){if(this.deleteContents(),e){var t=this.createContextualFragment(e),n=t.lastChild;this.insertNode(t),this.collapseAfter(n)}}}),f(e.selectionPrototype,{expand:ge((function(e,t,n){this.changeEachRange((function(e){e.expand(t,n)}))})),move:ge((function(e,t,n,r){var i=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var o=this.getRangeAt(0);r||(r={}),r.characterOptions=d(r.characterOptions,R),i=o.move(t,n,r),this.setSingleRange(o)}return i})),trimStart:me("trimStart"),trimEnd:me("trimEnd"),trim:me("trim"),selectCharacters:ge((function(t,n,r,i,o,a){var s=e.createRange(n);s.selectCharacters(n,r,i,a),this.setSingleRange(s,o)})),saveCharacterRanges:ge((function(e,t,n){for(var r=this.getAllRanges(),i=[],o=1==r.length&&this.isBackward(),a=0,s=r.length;a<s;++a)i[a]={characterRange:r[a].toCharacterRange(t,n),backward:o,characterOptions:n};return i})),restoreCharacterRanges:ge((function(t,n,r){this.removeAllRanges();for(var i,o,a,s=0,c=r.length;s<c;++s)a=(o=r[s]).characterRange,(i=e.createRange(n)).selectCharacters(n,a.start,a.end,o.characterOptions),this.addRange(i,o.backward)})),text:ge((function(e,t){for(var n=[],r=0,i=this.rangeCount;r<i;++r)n[r]=this.getRangeAt(r).text(t);return n.join("")}))}),e.innerText=function(t,n){var r=e.createRange(t);return r.selectNodeContents(t),r.text(n)},e.createWordIterator=function(e,t,n){var r=ae();n=_(n,O);var i=le(r.getPosition(e,t),n.characterOptions,n.wordOptions),o=b(n.direction);return{next:function(){return o?i.previousStartToken():i.nextEndToken()},dispose:function(){i.dispose(),this.next=function(){}}}},e.noMutation=function(e){e(ae()),se()},e.noMutation.createEntryPointFunction=ge,e.textRange={isBlockNode:function(e){return e&&(1==e.nodeType&&!/^(inline(-block|-table)?|none)$/.test(L(e))||9==e.nodeType||11==e.nodeType)},isCollapsedWhitespaceNode:H,createPosition:ge((function(e,t,n){return e.getPosition(t,n)}))}})),e})?r.apply(t,i):r)||(e.exports=o)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.d(r,{Editable:()=>ii});var e={};n.r(e),n.d(e,{getHost:()=>C,getNodeIndex:()=>w,isBeginningOfHost:()=>O,isDocumentFragmentWithoutChildren:()=>I,isEndOfHost:()=>_,isEndOffset:()=>x,isInlineElement:()=>D,isLinebreak:()=>A,isSameNode:()=>P,isStartOffset:()=>T,isTextEndOfHost:()=>M,isTextEndOffset:()=>B,isVoid:()=>R,isVoidTextNode:()=>E,isWhitespaceOnly:()=>N,lastChild:()=>L,lastOffsetWithContent:()=>k,latestChild:()=>F});var t={};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n.r(t),n.d(t,{adoptElement:()=>ie,areSameAttributes:()=>de,cleanInternals:()=>ee,cloneRangeContents:()=>oe,containsString:()=>xe,createFragmentFromString:()=>re,deleteCharacter:()=>Te,expandTo:()=>ye,extractContent:()=>te,forceWrap:()=>Ce,getAncestorTags:()=>ue,getInnerHtmlOfFragment:()=>ne,getInnerTags:()=>he,getTagNames:()=>ge,getTags:()=>ce,getTagsByName:()=>le,getTagsByNameAndAttributes:()=>fe,insertCharacter:()=>Oe,isAffectedBy:()=>pe,isExactSelection:()=>me,isWrappable:()=>Se,normalizeTags:()=>Z,normalizeWhitespace:()=>J,nuke:()=>Ae,nukeElem:()=>ke,nukeTag:()=>Me,removeFormatting:()=>Ne,removeFormattingElem:()=>Ee,selectNodeContents:()=>ve,surround:()=>_e,tidyHtml:()=>X,toggleTag:()=>be,unwrap:()=>Re,unwrapInternalNodes:()=>se,wrap:()=>we});var s=n(8),c=n.n(s);const u={log:!1,logErrors:!0,editableClass:"js-editable",editableDisabledClass:"js-editable-disabled",pastingAttribute:"data-editable-is-pasting",boldMarkup:{type:"tag",name:"strong",attribs:{}},italicMarkup:{type:"tag",name:"em",attribs:{}},underlineMarkup:{type:"tag",name:"u",attribs:{}},linkMarkup:{type:"tag",name:"a",attribs:{}},pastedHtmlRules:{allowedElements:{a:{href:!0,rel:!0,target:!0},strong:{},em:{},br:{}},requiredAttributes:{a:["href"]},transformElements:{b:"strong",i:"em"},splitIntoBlocks:["h1","h2","h3","h4","h5","h6","p","blockquote"],blockLevelElements:["h1","h2","h3","h4","h5","h6","div","p","pre","hr","blockquote","article","figure","header","footer","ul","ol","li","section","table","video"],blacklistedElements:["style","script"],keepInternalRelativeLinks:!1,replaceQuotes:{}}};function l(){if(!1!==u.logErrors){var e=1===arguments.length?arguments[0]:Array.from(arguments);if(n.g.console)return"function"==typeof console.error?console.error(e):void console.log(e)}}var f=Object.prototype.toString,d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function h(e){return e.replace(/\s+$/,"")}function g(e){return e.replace(/^\s+|\s+$/g,"")}function p(e){return"[object String]"===f.call(e)}var v=function(e,t){return"string"==typeof e?Array.from(t.querySelectorAll(e)):e.tagName?[e]:Array.isArray(e)?e:Array.from(e)},m=function(e,t){return"string"==typeof e?t.querySelector(e):e.tagName?e:e[0]?e[0]:e},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=t.document.createElement("div");return n.innerHTML=e,n.firstElementChild},b=function(e,t){if(e.closest||(e=e.parentNode),e&&e.closest)return e.closest(t)};function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e){return e=e.jquery?e[0]:e,b(e,".".concat(u.editableClass))}function w(e){for(var t=0;null!==(e=e.previousSibling);)t++;return t}function R(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e.childNodes);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(3===r.nodeType&&!E(r))return!1;if(1===r.nodeType)return!1}}catch(e){n.e(e)}finally{n.f()}return!0}function E(e){return 3===e.nodeType&&!e.nodeValue}function N(e){return 3===e.nodeType&&0===k(e)}function A(e){return 1===e.nodeType&&"BR"===e.tagName}function k(e){if(3===e.nodeType)return h(e.nodeValue).length;var t=0;return Array.from(e.childNodes).reverse().every((function(e,n,r){return!(!N(e)&&!A(e)&&(t=r.length-n,1))})),t}function O(e,t,n){if(t===e)return T(t,n);if(T(t,n)){var r=w(t);return O(e,t.parentNode,r)}return!1}function _(e,t,n){if(t===e)return x(t,n);if(x(t,n)){var r=w(t)+1;return _(e,t.parentNode,r)}return!1}function T(e,t){return 3===e.nodeType?0===t:0===e.childNodes.length||1===e.childNodes.length&&1===e.firstChild.nodeType&&"remove"===e.firstChild.getAttribute("data-editable")||e.childNodes[t]===e.firstChild}function x(e,t){return 3===e.nodeType?t===e.length:0===e.childNodes.length||t>0&&e.childNodes[t-1]===e.lastChild}function M(e,t,n){if(t===e)return B(t,n);if(B(t,n)){var r=w(t)+1;return M(e,t.parentNode,r)}return!1}function B(e,t){return 3===e.nodeType?t>=h(e.nodeValue).length:0===e.childNodes.length||t>=k(e)}function P(e,t){var n,r,i;if(e.nodeType!==t.nodeType)return!1;if(e.nodeName!==t.nodeName)return!1;for(n=0,r=e.attributes.length;n<r;n++)if(i=e.attributes[n],t.getAttribute(i.name)!==i.value)return!1;return!0}function L(e){return e.lastChild?L(e.lastChild):e}function F(e){return console.warn("Editable.js: Using obsolete function parser.latestCild(), use lastChild() instead"),L(e)}function I(e){return e&&11===e.nodeType&&0===e.childNodes.length}function D(e,t){switch((t.currentStyle||e.getComputedStyle(t,"")).display){case"inline":case"inline-block":return!0;default:return!1}}var j=0;function H(e,t){var n=e.commonAncestorContainer;null!==n.ownerDocument&&void 0!==n.ownerDocument||l("Cannot save range: range is emtpy");var r=e.cloneRange();r.collapse(t);var i=n.ownerDocument.defaultView.document,o=i.createElement("span");return o.id="editable-range-boundary-".concat(++j),o.setAttribute("data-editable","remove"),o.style.lineHeight="0",o.style.display="none",o.appendChild(i.createTextNode("\ufeff")),r.insertNode(o),o}function W(e,t,n,r){var i=z(e,n);if(!i)return console.log("Marker element has been removed. Cannot restore selection.");t[r?"setStartBefore":"setEndBefore"](i),i.remove()}function V(e){var t,n,r;return e.collapsed?t={markerId:(r=H(e,!1)).id,collapsed:!0}:(r=H(e,!1),t={startMarkerId:(n=H(e,!0)).id,endMarkerId:r.id,collapsed:!1}),e.collapsed?e.collapseBefore(r):(e.setEndBefore(r),e.setStartAfter(n)),t}function q(e,t){if(!t.restored){var n=c().createRange();if(t.collapsed){var r=z(e,t.markerId);if(r){r.style.display="inline";var i=r.previousSibling;i&&3===i.nodeType?(r.remove(),n.collapseToPoint(i,i.length)):(n.collapseBefore(r),r.remove())}else console.log("Marker element has been removed. Cannot restore selection.")}else W(e,n,t.startMarkerId,!0),W(e,n,t.endMarkerId,!1);return n.normalizeBoundaries(),n}}function z(e,t){return e.querySelector("#".concat(t))}function U(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t,n){return t=V(t),n(),q(e,t)}var $=/\u200B/g,Q=/\uFEFF/g,Y=/[^\S ]/g;function X(e){Z(e)}function Z(e){var t,n=document.createDocumentFragment(),r=U(e.childNodes);try{for(r.s();!(t=r.n()).done;){var i=t.value;if("BR"===i.nodeName||i.textContent){if(1===i.nodeType&&"BR"!==i.nodeName){for(var o=i;null!==(o=o.nextSibling)&&P(o,i);){var a,s=U(o.childNodes);try{for(s.s();!(a=s.n()).done;){var c=a.value;i.appendChild(c.cloneNode(!0))}}catch(e){s.e(e)}finally{s.f()}o.remove()}Z(i)}n.appendChild(i.cloneNode(!0))}}}catch(e){r.e(e)}finally{r.f()}for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(n)}function J(e){return e.replace(Y," ")}function ee(e){e.innerHTML=te(e,!0)}function te(e,t){var n=(11===e.nodeType?ne(e):e.innerHTML).replace(Q,"").replace($,"<br>"),r=document.createElement("div");return r.innerHTML=n,se(r,t),ae(r,"firstChild"),ae(r,"lastChild"),r.innerHTML}function ne(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}function re(e){var t=document.createElement("div");t.innerHTML=e;for(var n=document.createDocumentFragment();t.firstChild;)n.appendChild(t.firstChild);return n}function ie(e,t){return e.ownerDocument!==t?t.adoptNode(e):e}function oe(e){for(var t=e.cloneContents().childNodes[0],n=document.createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return n}function ae(e,t){for(var n;n=e[t];)if(3===n.nodeType){if(!/^\s+$/.test(n.textContent))break;e.removeChild(n)}else{if("BR"!==n.nodeName){n[t]&&ae(n,t);break}n.remove()}}function se(e,t){for(;e;){var n=e.nextSibling;if(1===e.nodeType){var r=e.getAttribute("data-editable");e.firstChild&&se(e.firstChild,t),("remove"===r||"ui-remove"===r&&!t)&&e.remove(),("unwrap"===r||"ui-unwrap"===r&&!t)&&Re(e),e=n}else e=n}}function ce(e,t,n){var r=he(t,n),i=ue(e,t,n);return r.concat(i)}function ue(e,t,n){for(var r=[],i=t.commonAncestorContainer;i!==e;)n&&!n(i)||r.push(i),i=i.parentNode;return r}function le(e,t,n){return ce(e,t,(function(e){return e.nodeName.toUpperCase()===n.toUpperCase()}))}function fe(e,t,n){return ce(e,t,(function(e){return e.nodeName.toUpperCase()===n.nodeName.toUpperCase()&&de(e.attributes,n.attributes)}))}function de(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=t[e[n].name];if(!r||r.value!==e[n].value)return!1}return!0}function he(e,t){return e.getNodes([1],t)}function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return e.nodeName}))}function pe(e,t,n){return ce(e,t).some((function(e){return e.nodeName===n.toUpperCase()}))}function ve(e){var t=c().createRange();return t.selectNodeContents(e),t}function me(e,t,n){var r=c().createRange();if(r.selectNodeContents(t),!e.intersectsRange(r))return!1;var i=e.toString(),o=(t.jquery?t[0]:t).textContent;return n&&(i=g(i),o=g(o)),""!==i&&i===o}function ye(e,t,n){return t.selectNodeContents(n),t}function be(e,t,n){var r=fe(e,t,n);return 1===r.length&&me(t,r[0],"visible")?Ee(e,t,n):Ce(e,t,n)}function Se(e){return e.canSurroundContents()}function Ce(e,t,n){var r=K(e,t,(function(){ke(e,t,n)}));return Se(r)||(r=K(e,r,(function(){Ae(e,r)}))),we(r,n),r}function we(e,t){Se(e)?("string"==typeof t&&(t=y(t)),e.surroundContents(t)):console.log("content.wrap(): can not surround range")}function Re(e){for(var t=(e=e.jquery?e[0]:e).parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}function Ee(e,t,n){return K(e,t,(function(){ke(e,t,n)}))}function Ne(e,t,n){return K(e,t,(function(){Ae(e,t,n)}))}function Ae(e,t,n){ce(e,t).forEach((function(e){"BR"===e.nodeName.toUpperCase()||n&&!e.matches(n)||Re(e)}))}function ke(e,t,n){ce(e,t).forEach((function(e){"BR"!==e.nodeName.toUpperCase()&&(!n||e.nodeName.toUpperCase()===n.nodeName.toUpperCase()&&de(e.attributes,n.attributes))&&Re(e)}))}function Oe(e,t,n){var r=document.createTextNode(t),i=e.cloneRange();i.collapse(n),i.insertNode(r),e[n?"setStartBefore":"setEndAfter"](r),e.normalizeBoundaries()}function _e(e,t,n,r){return Oe(t,r||n,!1),Oe(t,n,!0),t}function Te(e,t,n){if(!xe(t,n))return t;t.splitBoundaries();var r=K(e,t,(function(){var e=function(e,t){t||(t="g");var n=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");return new RegExp(n,t)}(n);t.getNodes([3],(function(t){return t.nodeValue.search(e)>=0})).forEach((function(t){t.nodeValue=t.nodeValue.replace(e,"")}))}));return r.normalizeBoundaries(),r}function xe(e,t){return e.toString().indexOf(t)>=0}function Me(e,t,n){ce(e,t).forEach((function(e){e.nodeName.toUpperCase()===n.toUpperCase()&&Re(e)}))}var Be=1,Pe={},Le=De("nextElementSibling"),Fe=De("previousElementSibling");function Ie(e,t){var n=t.normalize,r=t.shouldSpellcheck;!function(e){e.hasAttribute("data-editable")||(e.setAttribute("data-editable","id-".concat(Be)),Be+=1)}(e),e.setAttribute("contenteditable",!0),e.setAttribute("spellcheck",Boolean(r)),e.classList.remove(u.editableDisabledClass),e.classList.add(u.editableClass),n&&X(e)}function De(e){return function(t){var n=t[e];return n&&n.getAttribute("contenteditable")?n:null}}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function He(e){return function(e){if(Array.isArray(e))return je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var We,Ve,qe,ze,Ue,Ge,Ke,$e,Qe=[["",""],["",""],['"','"'],["",""],["",""],["",""],["",""]],Ye=[["",""],["",""],["",""],["",""],["",""],["'","'"],["",""]],Xe=["","'"],Ze=/(['"])(?![^<]*?>)/g,Je=/\s|[>\-"]/,et=/\s|[<\-"'.;?:,]/;function tt(e,t){(We=t||{}).quotes=We.quotes||[void 0,void 0],We.singleQuotes=We.singleQuotes||[void 0,void 0];var n=function(e){return He(e.matchAll(Ze)).map((function(t){var n=t.index;return{char:t[1],before:n>0?e[n-1]:"",after:n+1<e.length?e[n+1]:""}}))}(e);return n.length>0?(nt(n,0),function(e,t){var n=0;return e.replace(Ze,(function(e){var r=t[n].replace||t[n].char;return n+=1,r}))}(e,n)):e}function nt(e,t){for(;t<e.length;){var n=rt(e,t);if(n){if(e[t].replace="double"===n.type?We.quotes[0]:We.singleQuotes[0],e[n.position].replace="double"===n.type?We.quotes[1]:We.singleQuotes[1],n.position!==t+1){var r=e.slice(t+1,n.position);r&&nt(r,0)}t=n.position+1}else e[t].replace=ot(e[t].char),t+=1}}function rt(e,t){if(t!==e.length-1){var n=e[t],r=n.char;if(!n.before||Je.test(n.before))for(var i=it(r,Ye),o=it(r,Qe),a=t+1;a<e.length;a++)if(e[a].after&&et.test(e[a].after)||!e[a].after){if(i.includes(e[a].char))return{position:a,type:"single"};if(o.includes(e[a].char))return{position:a,type:"double"}}}}function it(e,t){return t.filter((function(t){return t[0]===e})).map((function(e){return e[1]}))}function ot(e){if(Xe.includes(e))return We.apostrophe}var at,st=/^\s*$/,ct="\x3c!-- BLOCK --\x3e";function ut(e){var t=e.pastedHtmlRules;Ve=t.allowedElements||{},qe=t.requiredAttributes||{},ze=t.transformElements||{},$e=t.blacklistedElements||[],at=t.keepInternalRelativeLinks||!1,Ge=t.replaceQuotes||{},Ue={},t.blockLevelElements.forEach((function(e){Ue[e]=!0})),Ke={},t.splitIntoBlocks.forEach((function(e){Ke[e]=!0}))}function lt(e,t,n){var r=e.ownerDocument;e.setAttribute(u.pastingAttribute,!0),t.isSelection&&(t=t.deleteContent());var i=r.createElement("div");i.innerHTML=n;var o=function(e){return ft(e).split(ct).map((function(e){return g((t=e,Ge.quotes||Ge.singleQuotes||Ge.apostrophe?tt(t,Ge):t).replace(/\n/g," ").replace(/ {2,}/g," ").replace(/(.)\u00A0/g,(function(e,t){return t+(/[\u0020]/.test(t)?"":" ")})));var t})).filter((function(e){return!st.test(e)}))}(i);return e.removeAttribute(u.pastingAttribute),{blocks:o,cursor:t}}function ft(e){return Array.from(e.childNodes).reduce((function(e,t){if(-1!==$e.indexOf(t.nodeName.toLowerCase()))return"";if(at&&"A"===t.nodeName&&t.href){var n=t.getAttribute("href").replace(window.location.origin,"");t.setAttribute("href",n)}return 1===t.nodeType?e+function(e,t){var n=e.nodeName.toLowerCase();if(function(e,t){return Ve[e]&&function(e,t){var n=qe[e];return!n||!n.some((function(e){return!t.getAttribute(e)}))}(e,t)}(n=function(e){return ze[e]||e}(n),e)){var r=function(e,t){return Array.from(t.attributes).reduce((function(t,n){var r=n.name,i=n.value;return Ve[e][r]&&i?"".concat(t," ").concat(r,'="').concat(i,'"'):t}),"")}(n,e);return"br"===n?"<".concat(n+r,">"):st.test(t)?t:"<".concat(n+r,">").concat(t,"</").concat(n,">")}return Ke[n]?ct+t+ct:Ue[n]?"".concat(t," "):t}(t,ft(t)):3===t.nodeType?e+t.nodeValue.replace(/[&<>]/g,(function(e){return d[e]})):e}),"")}ut(u);var dt=n(206),ht=n.n(dt),gt=(document.documentElement.contentEditable,"WebKit"===ht().getParser(window.navigator.userAgent).getEngineName()),pt=function(e){var t=e,n=t.onselectionchange;if(void 0!==n)try{return t.onselectionchange=0,null===t.onselectionchange}catch(e){}finally{t.onselectionchange=n}return!1}(document),vt=!!gt;function mt(e,t){var n=function(e){var t={};function n(e,n){e.split(" ").forEach((function(e){t[e]=t[e]||[],t[e].unshift(n)}))}function r(e,n){var r=t[e];if(r){var i=r.indexOf(n);i<0||r.splice(i,1)}}return{on:function(e,t){if(2===arguments.length)n(e,t);else if(1===arguments.length)for(var r in e)n(r,e[r]);return this},off:function(e,n){2===arguments.length?r(e,n):1===arguments.length?t[e]=[]:t={}},notify:function(n,r){var i=Array.from(arguments);e?(r=n,n=e,i.splice(0,1)):i.splice(0,2),this.switchContext&&r!==this.switchContext.events.shift()&&(this.switchContext=void 0);var o=t[r];o&&o.every((function(e){return!1!==e.apply(n,i)}))}}}(t);e.on=n.on,e.off=n.off,e.notify=n.notify}function yt(e){return{x:void 0!==e.pageXOffset?e.pageXOffset:(e.document.documentElement||e.document.body.parentNode||e.document.body).scrollLeft,y:void 0!==e.pageYOffset?e.pageYOffset:(e.document.documentElement||e.document.body.parentNode||e.document.body).scrollTop}}var bt=function(){function e(t,n){i(this,e),this.setHost(t),this.range=n,this.isCursor=!0}return a(e,[{key:"getTags",value:function(e){return ce(this.host,this.range,e)}},{key:"getTagNames",value:function(e){return ge(this.getTags(e))}},{key:"getTagsByName",value:function(e){return le(this.host,this.range,e)}},{key:"getInnerTags",value:function(e){return he(this.range,e)}},{key:"getAncestorTags",value:function(e){return ue(this.host,this.range,e)}},{key:"isAtEnd",value:function(){return _(this.host,this.range.endContainer,this.range.endOffset)}},{key:"isAtTextEnd",value:function(){return M(this.host,this.range.endContainer,this.range.endOffset)}},{key:"isAtLastLine",value:function(){var e=this.win.document.createRange();e.selectNodeContents(this.host),e.collapse(!1);var t=St(e,this.win),n=St(this.range.nativeRange,this.win);return t.bottom===n.bottom}},{key:"isAtFirstLine",value:function(){var e=this.win.document.createRange();e.selectNodeContents(this.host),e.collapse(!0);var t=St(e,this.win),n=St(this.range.nativeRange,this.win);return t.top===n.top}},{key:"isAtBeginning",value:function(){return O(this.host,this.range.startContainer,this.range.startOffset)}},{key:"insertBefore",value:function(e){if(p(e)&&(e=re(e)),!I(e)){var t=e=this.adoptElement(e);if(11===e.nodeType){var n=e.childNodes.length-1;t=e.childNodes[n]}this.range.insertNode(e),this.range.setStartAfter(t),this.range.setEndAfter(t)}}},{key:"insertAfter",value:function(e){p(e)&&(e=re(e)),I(e)||(e=this.adoptElement(e),this.range.insertNode(e))}},{key:"setSelection",value:function(){this.setVisibleSelection()}},{key:"setVisibleSelection",value:function(){if(this.win.document.activeElement!==this.host){var e=yt(this.win),t=e.x,n=e.y;this.win.scrollTo(t,n)}c().getSelection(this.win).setSingleRange(this.range)}},{key:"before",value:function(){var e=this.range.cloneRange();return e.collapse(!0),e.setStartBefore(this.host),oe(e)}},{key:"textBefore",value:function(){var e=this.range.cloneRange();return e.collapse(!0),e.setStartBefore(this.host),e.toString()}},{key:"beforeHtml",value:function(){return ne(this.before())}},{key:"after",value:function(){var e=this.range.cloneRange();return e.collapse(!1),e.setEndAfter(this.host),oe(e)}},{key:"textAfter",value:function(){var e=this.range.cloneRange();return e.collapse(!1),e.setEndAfter(this.host),e.toString()}},{key:"afterHtml",value:function(){return ne(this.after())}},{key:"getBoundingClientRect",value:function(){return this.range.nativeRange.getBoundingClientRect()}},{key:"getCoordinates",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"absolute",t=this.range.nativeRange.getBoundingClientRect();if("fixed"===e)return t;var n=yt(this.win),r=n.x,i=n.y;return{top:t.top+i,bottom:t.bottom+i,left:t.left+r,right:t.right+r,height:t.height,width:t.width}}},{key:"moveBefore",value:function(t){if(this.updateHost(t),this.range.setStartBefore(t),this.range.setEndBefore(t),this.isSelection)return new e(this.host,this.range)}},{key:"moveAfter",value:function(t){if(this.updateHost(t),this.range.setStartAfter(t),this.range.setEndAfter(t),this.isSelection)return new e(this.host,this.range)}},{key:"moveAtBeginning",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.host;if(this.updateHost(t),this.range.selectNodeContents(t),this.range.collapse(!0),this.isSelection)return new e(this.host,this.range)}},{key:"moveAtEnd",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.host;if(this.updateHost(t),this.range.selectNodeContents(t),this.range.collapse(!1),this.isSelection)return new e(this.host,this.range)}},{key:"moveAtTextEnd",value:function(e){return this.moveAtEnd(L(e))}},{key:"setHost",value:function(e){e.jquery&&(e=e[0]),this.host=e,this.win=null==e?window:e.ownerDocument.defaultView}},{key:"updateHost",value:function(e){var t=C(e);t||l("Can not set cursor outside of an editable block"),this.setHost(t)}},{key:"retainVisibleSelection",value:function(e){this.save(),e(),this.restore(),this.setVisibleSelection()}},{key:"save",value:function(){this.savedRangeInfo=V(this.range),this.savedRangeInfo.host=this.host}},{key:"restore",value:function(){this.savedRangeInfo||l("Could not restore selection"),this.host=this.savedRangeInfo.host,this.range=q(this.host,this.savedRangeInfo),this.savedRangeInfo=void 0}},{key:"equals",value:function(e){return!!(e&&e.host&&e.host.isEqualNode(this.host)&&e.range&&e.range.equals(this.range))}},{key:"createElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.win.document.createElement(e);for(var r in t){var i=t[r];n.setAttribute(r,i)}return n}},{key:"createTextNode",value:function(e){return this.win.document.createTextNode(e)}},{key:"adoptElement",value:function(e){return ie(e,this.win.document)}},{key:"triggerChange",value:function(){var e=document.createEvent("HTMLEvents");e.initEvent("formatEditable",!0,!1),this.host.dispatchEvent(e)}}],[{key:"findHost",value:function(e,t){return b(e,t)}}]),e}();function St(e,t){if(1!==e.startContainer.nodeType)return e.getBoundingClientRect();var n=t.document.createElement("span");n.setAttribute("doc-editable","unwrap"),e.insertNode(n);var r=n.getBoundingClientRect();return n.remove(),r}function Ct(e,t){return(Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){return!t||"object"!==wt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Et(e){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(554);var Nt=function(){function e(t,n){i(this,e),this.current=this.previous=this.nextNode=this.root=t,this.iteratorFunc=this[n||"getNext"]}return a(e,[{key:Symbol.iterator,value:function(){return this}},{key:"getNextTextNode",value:function(){for(var e;e=this.getNext();)if(3===e.nodeType&&""!==e.data)return e}},{key:"getPreviousTextNode",value:function(){for(var e;e=this.getPrevious();)if(3===e.nodeType&&""!==e.data)return e}},{key:"next",value:function(){var e=this.iteratorFunc();return e?{value:e}:{done:!0}}},{key:"getNext",value:function(){var e=this.current=this.nextNode,t=this.nextNode=void 0;if(this.current)if((t=e.firstChild)&&"remove"!==e.getAttribute("data-editable"))this.nextNode=t;else for(;e!==this.root&&!(this.nextNode=e.nextSibling);)e=e.parentNode;return this.current}},{key:"getPrevious",value:function(){var e=this.current=this.previous,t=this.previous=void 0;if(this.current)if((t=e.lastChild)&&"remove"!==e.getAttribute("data-editable"))this.previous=t;else for(;e!==this.root&&!(this.previous=e.previousSibling);)e=e.parentNode;return this.current}},{key:"replaceCurrent",value:function(e){this.current=e,this.nextNode=void 0,this.previous=void 0;for(var t=this.current;t!==this.root&&!(this.nextNode=t.nextSibling);)t=t.parentNode}}]),e}();const At={extractText:function(e){var t="";return function(e,t){for(var n,r=new Nt(e);n=r.getNext();)3===n.nodeType&&""!==n.data?t(n.data):1===n.nodeType&&"BR"===n.nodeName&&t(" ")}(e,(function(e){t+=e})),t},highlightMatches:function(e,t){if(t&&0!==t.length)for(var n,r,i,o=new Nt(e),a=0,s=0,c=t[a],u=[];n=o.getNext();)if(3===n.nodeType&&""!==n.data){var l=(i=n).data,f=s+l.length;if(c.startIndex<f&&s<c.endIndex){var d=s<=c.startIndex,h=f>=c.endIndex;d&&(r=c.id||c.startIndex);var g;g=d?c.startIndex-s:0;var p;p=h?c.endIndex-s-g:l.length-g;var v={element:i,text:l.substring(g,g+p),offset:g,length:p,isLastPortion:h,wordId:r};if(u.push(v),h){var m=this.wrapMatch(u,c.marker,c.title);o.replaceCurrent(m),f=s+v.length+v.offset,u=[],(a+=1)<t.length&&(c=t[a])}}s=f}else if(1===n.nodeType&&"BR"===n.nodeName){s+=1;continue}},wrapMatch:function(e,t,n){var r=this;return e.map((function(e){return r.wrapPortion(e,t,n)})).pop()},wrapPortion:function(e,t,n){var r=c().createRange();r.setStart(e.element,e.offset),r.setEnd(e.element,e.offset+e.length);var i=t.cloneNode(!0);if(i.setAttribute("data-word-id",e.wordId),n&&i.setAttribute("title",n),r.surroundContents(i),i.nextSibling){var o=i.nextSibling;3===o.nodeType&&""===o.data&&o.remove()}return i}};var kt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"word";i(this,e),this.marker=t,this.matchMode=n}return a(e,[{key:"isElement",value:function(e){try{return e instanceof HTMLElement}catch(t){return"object"===wt(e)&&1===e.nodeType&&"object"===wt(e.style)&&"object"===wt(e.ownerDocument)}}},{key:"findMatches",value:function(e,t){if(e&&""!==e&&this.isElement(this.marker))return t&&t.length>0?this.searchMatches(e,t):void 0}},{key:"searchMatches",value:function(e,t){var n=this,r=("word"===this.matchMode?Tt:Ot)(t);return He(e.matchAll(r)).map((function(e){return n.prepareMatch(e)}))}},{key:"prepareMatch",value:function(e){var t,n;return"word"===this.matchMode?(t=e.index+e[1].length,n=e[2]):(t=e.index,n=e[0]),{startIndex:t,endIndex:t+n.length,match:n,marker:this.marker}}}]),e}();function Ot(e){var t=(e||[]).map((function(e){return xt(e)})),n="(".concat(t.join("|"),")");return new RegExp(n,"g")}var _t="\\u0041-\\u005A\\u0061-\\u007A\\u0030-\\u0039\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u00FF\\u0100-\\u017F\\u0180-\\u024F";function Tt(e){var t=(e||[]).map((function(e){return xt(e)})),n="([^".concat(_t,"]|^)")+"(".concat(t.join("|"),")")+"(?=[^".concat(_t,"]|$)");return new RegExp(n,"g")}function xt(e){return String(e).replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function Mt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pt(e,t){return b(e,"[data-editable]:not([data-word-id])")===t}var Lt={highlightText:function(e,t,n,r){if(!this.hasHighlight(e,n)){var i=At.extractText(e),o='<span class="highlight-'.concat(r,'"></span>'),a=Lt.createMarkerNode(o,r,this.win),s=new kt(a,"text").findMatches(i,[t]);return s&&s.length?(n&&(s[0].id=n),At.highlightMatches(e,s),s[0].startIndex):void 0}},highlightRange:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"comment";this.hasHighlight(e,t)&&this.removeHighlight(e,t);var a=c().createRange();if(a.selectCharacters(e,n,r),!Pt(a.commonAncestorContainer,e))return-1;var s=Lt.createMarkerNode('<span class="highlight-'.concat(o,'" data-word-id="').concat(t,'"></span>'),o,this.win),u=a.extractContents();return s.appendChild(u),a.deleteContents(),a.insertNode(s),Lt.cleanupStaleMarkerNodes(e,"comment"),i&&i.notify("change",e),n},updateHighlight:function(e,t,n,r){if(document.documentElement.classList){var i,o=Mt(e.querySelectorAll('[data-word-id="'.concat(t,'"]')));try{for(o.s();!(i=o.n()).done;){var a=i.value;r&&a.classList.remove(r),n&&a.classList.add(n)}}catch(e){o.e(e)}finally{o.f()}}},removeHighlight:function(e,t,n){var r,i=Mt(e.querySelectorAll('[data-word-id="'.concat(t,'"]')));try{for(i.s();!(r=i.n()).done;)Re(r.value),e.normalize(),n&&n.notify("change",e)}catch(e){i.e(e)}finally{i.f()}},hasHighlight:function(e,t){return!!e.querySelectorAll('[data-word-id="'.concat(t,'"]')).length},extractHighlightedRanges:function(e,t){var n="[data-word-id]";t&&(n+='[data-highlight="'.concat(t,'"]'));var r=e.querySelectorAll(n);if(r.length){var i,o={},a=Mt(r);try{for(a.s();!(i=a.n()).done;){var s=i.value.getAttribute("data-word-id");o[s]||(o[s]=e.querySelectorAll('[data-word-id="'.concat(s,'"]')))}}catch(e){a.e(e)}finally{a.f()}var c={};for(var u in o){var l=this.extractMarkerNodePosition(e,o[u]);l&&(c[u]=l)}return c}},extractMarkerNodePosition:function(e,t){var n=c().createRange();t.length>1?(n.setStartBefore(t[0]),n.setEndAfter(t[t.length-1])):n.selectNode(t[0]);var r=n.toCharacterRange(e);return{start:r.start,end:r.end,text:n.text()}},cleanupStaleMarkerNodes:function(e,t){var n,r=Mt(e.querySelectorAll('span[data-highlight="'.concat(t,'"]')));try{for(r.s();!(n=r.n()).done;){var i=n.value;i.textContent.length||i.remove()}}catch(e){r.e(e)}finally{r.f()}},createMarkerNode:function(e,t,n){var r=y(e,n);return r.setAttribute("data-editable","ui-unwrap"),r.setAttribute("data-highlight",t),r}};const Ft=Lt;var It=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ct(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Et(t);if(n){var i=Et(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Rt(this,e)});function o(){var e;return i(this,o),delete(e=r.apply(this,arguments)).isCursor,e.isSelection=!0,e}return a(o,[{key:"text",value:function(){return this.range.toString()}},{key:"html",value:function(){return this.range.toHtml()}},{key:"isAllSelected",value:function(){return O(this.host,this.range.startContainer,this.range.startOffset)&&M(this.host,this.range.endContainer,this.range.endOffset)}},{key:"getTextRange",value:function(){return this.range.toCharacterRange(this.host)}},{key:"toString",value:function(){return this.range.toString()}},{key:"isWrappable",value:function(){return Se(this.range)}},{key:"getRects",value:function(){return this.range.nativeRange.getClientRects()}},{key:"link",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(t.href=e);var n=this.createElement(u.linkMarkup.name,u.linkMarkup.attribs);for(var r in t)n.setAttribute(r,t[r]);this.forceWrap(n)}},{key:"unlink",value:function(){this.removeFormatting(u.linkMarkup.name)}},{key:"toggleLink",value:function(e,t){var n=this.getTagsByName(u.linkMarkup.name);if(n.length>=1){var r=n[0];this.isExactSelection(r,"visible")?this.unlink():this.expandTo(r)}else this.link(e,t)}},{key:"highlight",value:function(e){e.highlightId;var t=this.textBefore(),n=this.text(),r=Ft.createMarkerNode('<span class="highlight-comment"></span>',this.win);r.setAttribute("data-match",n);var i={startIndex:t.length,endIndex:t.length+n.length,match:n,marker:r};At.highlightMatches(this.host,[i])}},{key:"toggle",value:function(e){e=this.adoptElement(e),this.range=be(this.host,this.range,e),this.setSelection()}},{key:"toggleCustom",value:function(e){var t=e.tagName,n=e.attributes,r=this.createElement(t,n);this.toggle(r)}},{key:"makeCustom",value:function(e){var t=e.tagName,n=e.attributes,r=this.createElement(t,n);this.forceWrap(r)}},{key:"makeBold",value:function(){var e=this.createElement(u.boldMarkup.name,u.boldMarkup.attribs);this.forceWrap(e)}},{key:"toggleBold",value:function(){var e=this.createElement(u.boldMarkup.name,u.boldMarkup.attribs);this.toggle(e)}},{key:"giveEmphasis",value:function(){var e=this.createElement(u.italicMarkup.name,u.italicMarkup.attribs);this.forceWrap(e)}},{key:"toggleEmphasis",value:function(){var e=this.createElement(u.italicMarkup.name,u.italicMarkup.attribs);this.toggle(e)}},{key:"makeUnderline",value:function(){var e=this.createElement(u.underlineMarkup.name,u.underlineMarkup.attribs);this.forceWrap(e)}},{key:"toggleUnderline",value:function(){var e=this.createElement(u.underlineMarkup.name,u.underlineMarkup.attribs);this.toggle(e)}},{key:"insertCharacter",value:function(e){var t=this.deleteContent(),n=t.createTextNode(e);return t.insertBefore(n),t.setSelection(),t}},{key:"surround",value:function(e,t){this.range=_e(this.host,this.range,e,t),this.setSelection()}},{key:"removeSurround",value:function(e,t){this.range=Te(this.host,this.range,e),this.range=Te(this.host,this.range,t),this.setSelection()}},{key:"removeChars",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;t<e.length;t++){var n=e[t];this.range=Te(this.host,this.range,n)}this.setSelection()}},{key:"toggleSurround",value:function(e,t){this.containsString(e)&&this.containsString(t)?this.removeSurround(e,t):this.surround(e,t)}},{key:"removeFormatting",value:function(e){this.range=Ne(this.host,this.range,e),this.setSelection()}},{key:"deleteContent",value:function(){return this.range.deleteContents(),new bt(this.host,this.range)}},{key:"expandTo",value:function(e){this.range=ye(this.host,this.range,e),this.setSelection()}},{key:"collapseAtBeginning",value:function(e){return this.range.collapse(!0),this.setSelection(),new bt(this.host,this.range)}},{key:"collapseAtEnd",value:function(e){return this.range.collapse(!1),this.setSelection(),new bt(this.host,this.range)}},{key:"forceWrap",value:function(e){e=this.adoptElement(e),this.range=Ce(this.host,this.range,e),this.setSelection()}},{key:"isExactSelection",value:function(e,t){return me(this.range,e,t)}},{key:"containsString",value:function(e){return xe(this.range,e)}},{key:"deleteCharacter",value:function(e){this.range=Te(this.host,this.range,e),this.setSelection()}}]),o}(bt),Dt=function(){function e(t,n){i(this,e),this.host=t&&t.jquery?t[0]:t,this.range=n,this.isAnythingSelected=void 0!==n,this.isCursor=this.isAnythingSelected&&n.collapsed,this.isSelection=this.isAnythingSelected&&!this.isCursor}return a(e,[{key:"getCursor",value:function(){if(this.isCursor)return new bt(this.host,this.range)}},{key:"getSelection",value:function(){if(this.isSelection)return new It(this.host,this.range)}},{key:"forceCursor",value:function(){return this.isSelection?this.getSelection().deleteContent():this.getCursor()}},{key:"isDifferentFrom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e,n=this.range,r=t.range;return n&&r?!n.equals(r):!(!n&&!r)}}]),e}(),jt=function(){function e(t,n){i(this,e),this.dispatcher=t,this.win=n||window,this.rangySelection=void 0,this.currentSelection=void 0,this.currentRange=void 0}return a(e,[{key:"syncSelection",value:function(){try{this.rangySelection=c().getSelection(this.win)}catch(e){return!1}return!0}},{key:"getRangeContainer",value:function(){var e=this.syncSelection();if(this.rangySelection.rangeCount&&e){var t=this.rangySelection.getRangeAt(0),n=C(t.commonAncestorContainer);if(n)return new Dt(n,t)}return new Dt}},{key:"getFreshRange",value:function(){return this.getRangeContainer()}},{key:"getFreshSelection",value:function(){var e=this.getRangeContainer();return e.isCursor?e.getCursor(this.win):e.getSelection(this.win)}},{key:"getSelection",value:function(){return this.currentSelection}},{key:"forceCursor",value:function(){return this.getRangeContainer().forceCursor()}},{key:"selectionChanged",value:function(){var e=this.getRangeContainer();if(e.isDifferentFrom(this.currentRange)){var t=this.currentSelection;this.currentRange=e,t&&(t.isCursor&&!this.currentRange.isCursor?this.dispatcher.notify("cursor",t.host):t.isSelection&&!this.currentRange.isSelection&&this.dispatcher.notify("selection",t.host)),this.currentRange.isCursor?(this.currentSelection=new bt(this.currentRange.host,this.currentRange.range),this.dispatcher.notify("cursor",this.currentSelection.host,this.currentSelection)):this.currentRange.isSelection?(this.currentSelection=new It(this.currentRange.host,this.currentRange.range),this.dispatcher.notify("selection",this.currentSelection.host,this.currentSelection)):this.currentSelection=void 0}}}]),e}(),Ht=function(){function e(t){i(this,e),mt(this),this.selectionWatcher=t}return a(e,[{key:"dispatchKeyEvent",value:function(e,t,n){switch(e.keyCode){case this.key.left:return this.notify(t,"left",e);case this.key.right:return this.notify(t,"right",e);case this.key.up:return this.notify(t,"up",e);case this.key.down:return this.notify(t,"down",e);case this.key.tab:return e.shiftKey?this.notify(t,"shiftTab",e):this.notify(t,"tab",e);case this.key.esc:return this.notify(t,"esc",e);case this.key.backspace:return this.preventContenteditableBug(t,e),this.notify(t,"backspace",e);case this.key.delete:return this.preventContenteditableBug(t,e),this.notify(t,"delete",e);case this.key.enter:return e.shiftKey?this.notify(t,"shiftEnter",e):this.notify(t,"enter",e);case this.key.ctrl:case this.key.shift:case this.key.alt:return;case 224:case 17:case 91:case 93:return;default:if(e.keyCode===this.key.b&&(e.ctrlKey||e.metaKey))return this.notify(t,"bold",e);if(e.keyCode===this.key.i&&(e.ctrlKey||e.metaKey))return this.notify(t,"italic",e);if(this.preventContenteditableBug(t,e),!n)return;if(!e.ctrlKey&&!e.metaKey)return this.notify(t,"character",e)}}},{key:"preventContenteditableBug",value:function(t,n){if(vt&&!n.ctrlKey&&!n.metaKey){var r=this.selectionWatcher.getFreshRange();if(r.isSelection){var i=e.getNodeToRemove(r.range,t);i&&i.remove()}}}}],[{key:"getNodeToRemove",value:function(t,n){if(0===t.startOffset){var r=t.startContainer;if(3===r.nodeType&&(r=r.parentNode),r!==n){var i=c().createRange();if(i.setStartBefore(r.firstChild),i.setEndAfter(r.lastChild),!i.containsRange(t)){if(3===t.startContainer.nodeType){var o=[3,1],a=r.firstChild;do{if(-1!==o.indexOf(a.nodeType))break}while(a=a.nextSibling);if(a!==t.startContainer)return}var s=t.cloneRange();return s.setStartBefore(r),e.getNodeToRemove(s,n)||r}}}}}]),e}();function Wt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ht.key=Ht.prototype.key={left:37,up:38,right:39,down:40,tab:9,esc:27,backspace:8,delete:46,enter:13,shift:16,ctrl:17,alt:18,b:66,i:73};var qt=!1,zt=function(){function e(t){i(this,e);var n=t.win;mt(this,t),this.supportsInputEvent=!1,this.document=n.document,this.config=t.config,this.editable=t,this.editableSelector=t.editableSelector,this.selectionWatcher=new jt(this,n),this.keyboard=new Ht(this.selectionWatcher),this.activeListeners=[],this.setup(),this.getEditableBlockByEvent=function(e){return b(e.target,t.editableSelector)}}return a(e,[{key:"setupDocumentListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={event:e,listener:t.bind(this),capture:n};return this.activeListeners.push(r),this.document.addEventListener(e,r.listener,n),this}},{key:"setup",value:function(){this.setupKeyboardEvents(),this.setupEventListeners()}},{key:"unload",value:function(){this.off();var e,t=Wt(this.activeListeners);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.document.removeEventListener(n.event,n.listener,n.capture)}}catch(e){t.e(e)}finally{t.f()}this.activeListeners.length=0}},{key:"suspend",value:function(){if(!this.suspended){this.suspended=!0;var e,t=Wt(this.activeListeners);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.document.removeEventListener(n.event,n.listener,n.capture)}}catch(e){t.e(e)}finally{t.f()}this.activeListeners.length=0}}},{key:"continue",value:function(){this.suspended&&(this.suspended=!1,this.setupEventListeners())}},{key:"setupEventListeners",value:function(){this.setupElementListeners(),this.setupKeydownListener(),pt?this.setupSelectionChangeListeners():this.setupSelectionChangeFallbackListeners()}},{key:"setupElementListeners",value:function(){this.setupDocumentListener("focus",(function(e){var t=this.getEditableBlockByEvent(e);t&&(e.target.getAttribute(u.pastingAttribute)||(this.selectionWatcher.syncSelection(),this.notify("focus",t)))}),!0).setupDocumentListener("blur",(function(e){var t=this.getEditableBlockByEvent(e);t&&(t.getAttribute(u.pastingAttribute)||this.notify("blur",t))}),!0).setupDocumentListener("copy",(function(e){var t=this.getEditableBlockByEvent(e);if(t){var n=this.selectionWatcher.getFreshSelection();n&&n.isSelection&&this.notify("clipboard",t,"copy",n)}})).setupDocumentListener("cut",(function(e){var t=this.getEditableBlockByEvent(e);if(t){var n=this.selectionWatcher.getFreshSelection();n&&n.isSelection&&(this.notify("clipboard",t,"cut",n),this.triggerChangeEvent(t))}})).setupDocumentListener("paste",(function(e){var t=this.getEditableBlockByEvent(e);if(t){e.preventDefault();var n=lt(t,this.selectionWatcher.getFreshSelection(),e.clipboardData.getData("text/html")||e.clipboardData.getData("text/plain")),r=n.blocks,i=n.cursor;r.length?(this.notify("paste",t,r,i),this.notify("change",t)):i.setVisibleSelection()}})).setupDocumentListener("input",(function(e){var t=this.getEditableBlockByEvent(e);t&&(qt?this.notify("change",t):qt=!0)})).setupDocumentListener("formatEditable",(function(e){var t=this.getEditableBlockByEvent(e);t&&this.notify("change",t)}))}},{key:"triggerChangeEvent",value:function(e){qt||this.notify("change",e)}},{key:"dispatchSwitchEvent",value:function(e,t,n){if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)){var r=this.selectionWatcher.getFreshSelection();r&&!r.isSelection&&(this.switchContext?this.switchContext.events=["cursor"]:this.switchContext={positionX:r.getBoundingClientRect().left,events:["cursor"]},"up"===n&&r.isAtFirstLine()&&(e.preventDefault(),e.stopPropagation(),this.switchContext.events=["switch","blur","focus","cursor"],this.notify("switch",t,n,r)),"down"===n&&r.isAtLastLine()&&(e.preventDefault(),e.stopPropagation(),this.switchContext.events=["switch","blur","focus","cursor"],this.notify("switch",t,n,r)))}}},{key:"setupKeydownListener",value:function(){this.setupDocumentListener("keydown",(function(e){var t=this.getEditableBlockByEvent(e);if(t){var n=!qt;this.keyboard.dispatchKeyEvent(e,t,n)}}),!0)}},{key:"setupKeyboardEvents",value:function(){var e=this;this.keyboard.on("up",(function(t){e.dispatchSwitchEvent(t,this,"up")})).on("down",(function(t){e.dispatchSwitchEvent(t,this,"down")})).on("backspace",(function(t){var n=e.selectionWatcher.getFreshRange();if(!n.isCursor)return e.triggerChangeEvent(this);var r=n.getCursor();if(!r.isAtBeginning())return e.triggerChangeEvent(this);t.preventDefault(),t.stopPropagation(),e.notify("merge",this,"before",r)})).on("delete",(function(t){var n=e.selectionWatcher.getFreshRange();if(!n.isCursor)return e.triggerChangeEvent(this);var r=n.getCursor();if(!r.isAtTextEnd())return e.triggerChangeEvent(this);t.preventDefault(),t.stopPropagation(),e.notify("merge",this,"after",r)})).on("enter",(function(t){t.preventDefault(),t.stopPropagation();var n=e.selectionWatcher.getFreshRange().forceCursor();n.isAtTextEnd()?e.notify("insert",this,"after",n):n.isAtBeginning()?e.notify("insert",this,"before",n):e.notify("split",this,n.before(),n.after(),n)})).on("shiftEnter",(function(t){t.preventDefault(),t.stopPropagation();var n=e.selectionWatcher.forceCursor();e.notify("newline",this,n)})).on("bold",(function(t){t.preventDefault(),t.stopPropagation();var n=e.selectionWatcher.getFreshSelection();n.isSelection&&e.notify("toggleBold",n)})).on("italic",(function(t){t.preventDefault(),t.stopPropagation();var n=e.selectionWatcher.getFreshSelection();n.isSelection&&e.notify("toggleEmphasis",n)})).on("character",(function(t){e.notify("change",this)}))}},{key:"setupSelectionChangeListeners",value:function(){var e=this,t=!1,n=!1,r=this.selectionWatcher;this.setupDocumentListener("selectionchange",(function(i){var o=e.selectionWatcher.getFreshSelection();o&&o.isSelection&&o.isAtBeginning()&&o.isAtEnd()?e.notify("selectToBoundary",o.host,i,"both"):o&&o.isSelection&&o.isAtBeginning()?e.notify("selectToBoundary",o.host,i,"start"):o&&o.isSelection&&o.isAtEnd()&&e.notify("selectToBoundary",o.host,i,"end"),n?t=!0:r.selectionChanged()})),this.setupDocumentListener("mousedown",(function(e){this.getEditableBlockByEvent(e)&&(!1===this.config.mouseMoveSelectionChanges&&(n=!0,setTimeout((function(){return r.selectionChanged()}),0)),this.document.addEventListener("mouseup",(function(){n=!1,t&&(t=!1,r.selectionChanged())}),{capture:!0,once:!0}))}))}},{key:"setupSelectionChangeFallbackListeners",value:function(){var e=this;this.setupDocumentListener("mouseup",(function(){setTimeout((function(){return e.selectionWatcher.selectionChanged()}),0)})),this.setupDocumentListener("keyup",(function(t){e.getEditableBlockByEvent(t)&&e.selectionWatcher.selectionChanged()}))}}]),e}();const Ut=function(e,t){return e===t||e!=e&&t!=t},Gt=function(e,t){for(var n=e.length;n--;)if(Ut(e[n][0],t))return n;return-1};var Kt=Array.prototype.splice;function $t(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}$t.prototype.clear=function(){this.__data__=[],this.size=0},$t.prototype.delete=function(e){var t=this.__data__,n=Gt(t,e);return!(n<0||(n==t.length-1?t.pop():Kt.call(t,n,1),--this.size,0))},$t.prototype.get=function(e){var t=this.__data__,n=Gt(t,e);return n<0?void 0:t[n][1]},$t.prototype.has=function(e){return Gt(this.__data__,e)>-1},$t.prototype.set=function(e,t){var n=this.__data__,r=Gt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const Qt=$t,Yt="object"==typeof global&&global&&global.Object===Object&&global;var Xt="object"==typeof self&&self&&self.Object===Object&&self;const Zt=Yt||Xt||Function("return this")(),Jt=Zt.Symbol;var en=Object.prototype,tn=en.hasOwnProperty,nn=en.toString,rn=Jt?Jt.toStringTag:void 0;var on=Object.prototype.toString;var an=Jt?Jt.toStringTag:void 0;const sn=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":an&&an in Object(e)?function(e){var t=tn.call(e,rn),n=e[rn];try{e[rn]=void 0;var r=!0}catch(e){}var i=nn.call(e);return r&&(t?e[rn]=n:delete e[rn]),i}(e):function(e){return on.call(e)}(e)},cn=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},un=function(e){if(!cn(e))return!1;var t=sn(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},ln=Zt["__core-js_shared__"];var fn,dn=(fn=/[^.]+$/.exec(ln&&ln.keys&&ln.keys.IE_PROTO||""))?"Symbol(src)_1."+fn:"";var hn=Function.prototype.toString;var gn=/^\[object .+?Constructor\]$/,pn=Function.prototype,vn=Object.prototype,mn=pn.toString,yn=vn.hasOwnProperty,bn=RegExp("^"+mn.call(yn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Sn=function(e){return!(!cn(e)||(t=e,dn&&dn in t))&&(un(e)?bn:gn).test(function(e){if(null!=e){try{return hn.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t},Cn=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Sn(n)?n:void 0},wn=Cn(Zt,"Map"),Rn=Cn(Object,"create");var En=Object.prototype.hasOwnProperty;var Nn=Object.prototype.hasOwnProperty;function An(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}An.prototype.clear=function(){this.__data__=Rn?Rn(null):{},this.size=0},An.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},An.prototype.get=function(e){var t=this.__data__;if(Rn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return En.call(t,e)?t[e]:void 0},An.prototype.has=function(e){var t=this.__data__;return Rn?void 0!==t[e]:Nn.call(t,e)},An.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Rn&&void 0===t?"__lodash_hash_undefined__":t,this};const kn=An,On=function(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map};function _n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}_n.prototype.clear=function(){this.size=0,this.__data__={hash:new kn,map:new(wn||Qt),string:new kn}},_n.prototype.delete=function(e){var t=On(this,e).delete(e);return this.size-=t?1:0,t},_n.prototype.get=function(e){return On(this,e).get(e)},_n.prototype.has=function(e){return On(this,e).has(e)},_n.prototype.set=function(e,t){var n=On(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};const Tn=_n;function xn(e){var t=this.__data__=new Qt(e);this.size=t.size}xn.prototype.clear=function(){this.__data__=new Qt,this.size=0},xn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},xn.prototype.get=function(e){return this.__data__.get(e)},xn.prototype.has=function(e){return this.__data__.has(e)},xn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Qt){var r=n.__data__;if(!wn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Tn(r)}return n.set(e,t),this.size=n.size,this};const Mn=xn,Bn=function(){try{var e=Cn(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Pn=function(e,t,n){"__proto__"==t&&Bn?Bn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Ln=function(e,t,n){(void 0!==n&&!Ut(e[t],n)||void 0===n&&!(t in e))&&Pn(e,t,n)},Fn=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s,i))break}return e};var In="object"==typeof exports&&exports&&!exports.nodeType&&exports,Dn=In&&"object"==typeof module&&module&&!module.nodeType&&module,jn=Dn&&Dn.exports===In?Zt.Buffer:void 0,Hn=jn?jn.allocUnsafe:void 0;const Wn=Zt.Uint8Array,Vn=function(e,t){var n,r,i=t?(n=e.buffer,r=new n.constructor(n.byteLength),new Wn(r).set(new Wn(n)),r):e.buffer;return new e.constructor(i,e.byteOffset,e.length)};var qn=Object.create;const zn=function(){function e(){}return function(t){if(!cn(t))return{};if(qn)return qn(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Un=(Gn=Object.getPrototypeOf,Kn=Object,function(e){return Gn(Kn(e))});var Gn,Kn,$n=Object.prototype;const Qn=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||$n)},Yn=function(e){return null!=e&&"object"==typeof e},Xn=function(e){return Yn(e)&&"[object Arguments]"==sn(e)};var Zn=Object.prototype,Jn=Zn.hasOwnProperty,er=Zn.propertyIsEnumerable;const tr=Xn(function(){return arguments}())?Xn:function(e){return Yn(e)&&Jn.call(e,"callee")&&!er.call(e,"callee")},nr=Array.isArray,rr=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ir=function(e){return null!=e&&rr(e.length)&&!un(e)};var or="object"==typeof exports&&exports&&!exports.nodeType&&exports,ar=or&&"object"==typeof module&&module&&!module.nodeType&&module,sr=ar&&ar.exports===or?Zt.Buffer:void 0;const cr=(sr?sr.isBuffer:void 0)||function(){return!1};var ur=Function.prototype,lr=Object.prototype,fr=ur.toString,dr=lr.hasOwnProperty,hr=fr.call(Object);var gr={};gr["[object Float32Array]"]=gr["[object Float64Array]"]=gr["[object Int8Array]"]=gr["[object Int16Array]"]=gr["[object Int32Array]"]=gr["[object Uint8Array]"]=gr["[object Uint8ClampedArray]"]=gr["[object Uint16Array]"]=gr["[object Uint32Array]"]=!0,gr["[object Arguments]"]=gr["[object Array]"]=gr["[object ArrayBuffer]"]=gr["[object Boolean]"]=gr["[object DataView]"]=gr["[object Date]"]=gr["[object Error]"]=gr["[object Function]"]=gr["[object Map]"]=gr["[object Number]"]=gr["[object Object]"]=gr["[object RegExp]"]=gr["[object Set]"]=gr["[object String]"]=gr["[object WeakMap]"]=!1;var pr="object"==typeof exports&&exports&&!exports.nodeType&&exports,vr=pr&&"object"==typeof module&&module&&!module.nodeType&&module,mr=vr&&vr.exports===pr&&Yt.process,yr=function(){try{return vr&&vr.require&&vr.require("util").types||mr&&mr.binding&&mr.binding("util")}catch(e){}}(),br=yr&&yr.isTypedArray;const Sr=br?function(e){return function(t){return e(t)}}(br):function(e){return Yn(e)&&rr(e.length)&&!!gr[sn(e)]},Cr=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var wr=Object.prototype.hasOwnProperty;const Rr=function(e,t,n){var r=e[t];wr.call(e,t)&&Ut(r,n)&&(void 0!==n||t in e)||Pn(e,t,n)};var Er=/^(?:0|[1-9]\d*)$/;const Nr=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Er.test(e))&&e>-1&&e%1==0&&e<t};var Ar=Object.prototype.hasOwnProperty;const kr=function(e,t){var n=nr(e),r=!n&&tr(e),i=!n&&!r&&cr(e),o=!n&&!r&&!i&&Sr(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=s.length;for(var u in e)!t&&!Ar.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Nr(u,c))||s.push(u);return s};var Or=Object.prototype.hasOwnProperty;const _r=function(e){if(!cn(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Qn(e),n=[];for(var r in e)("constructor"!=r||!t&&Or.call(e,r))&&n.push(r);return n},Tr=function(e){return ir(e)?kr(e,!0):_r(e)},xr=function(e){return function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),i?Pn(n,s,c):Rr(n,s,c)}return n}(e,Tr(e))},Mr=function(e,t,n,r,i,o,a){var s,c=Cr(e,n),u=Cr(t,n),l=a.get(u);if(l)Ln(e,n,l);else{var f=o?o(c,u,n+"",e,t,a):void 0,d=void 0===f;if(d){var h=nr(u),g=!h&&cr(u),p=!h&&!g&&Sr(u);f=u,h||g||p?nr(c)?f=c:Yn(s=c)&&ir(s)?f=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(c):g?(d=!1,f=function(e,t){if(t)return e.slice();var n=e.length,r=Hn?Hn(n):new e.constructor(n);return e.copy(r),r}(u,!0)):p?(d=!1,f=Vn(u,!0)):f=[]:function(e){if(!Yn(e)||"[object Object]"!=sn(e))return!1;var t=Un(e);if(null===t)return!0;var n=dr.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&fr.call(n)==hr}(u)||tr(u)?(f=c,tr(c)?f=xr(c):cn(c)&&!un(c)||(f=function(e){return"function"!=typeof e.constructor||Qn(e)?{}:zn(Un(e))}(u))):d=!1}d&&(a.set(u,f),i(f,u,r,o,a),a.delete(u)),Ln(e,n,f)}},Br=function e(t,n,r,i,o){t!==n&&Fn(n,(function(a,s){if(o||(o=new Mn),cn(a))Mr(t,n,s,r,e,i,o);else{var c=i?i(Cr(t,s),a,s+"",t,n,o):void 0;void 0===c&&(c=a),Ln(t,s,c)}}),Tr)},Pr=function(e){return e},Lr=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var Fr=Math.max;const Ir=Bn?function(e,t){return Bn(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Pr;var Dr=Date.now;const jr=function(e){var t=0,n=0;return function(){var r=Dr(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Ir),Hr=(Wr=function(e,t,n){Br(e,t,n)},function(e,t){return jr(function(e,t,n){return t=Fr(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Fr(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),Lr(e,this,s)}}(e,t,Pr),e+"")}((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(i=Wr.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(e,t,n){if(!cn(n))return!1;var r=typeof t;return!!("number"==r?ir(n)&&Nr(t,n.length):"string"==r&&t in n)&&Ut(n[t],e)}(t[0],t[1],o)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var a=t[n];a&&Wr(e,a,n)}return e})));var Wr,Vr=function(){function e(t){i(this,e),this.spellcheckService=t}return a(e,[{key:"check",value:function(e,t){if(!e)return t(null);var n=J(e);this.spellcheckService(n,(function(e){e&&e.length>0?t(null,e):t(null)}))}}]),e}(),qr={A0:"no-break space",2e3:"en quad",2001:"em quad",2002:"en space",2003:"em space",2004:"three-per-em space",2005:"four-per-em space",2006:"six-per-em space",2007:"figure space",2008:"punctuation space",2009:"thin space","200A":"hair space","202F":"narrow no-break space","205F":"medium mathematical space",3e3:"ideographic space"},zr=function(){function e(t){i(this,e),this.marker=t}return a(e,[{key:"findMatches",value:function(e){var t=this;if(e){var n="[".concat("\\u2000-\\u200A\\u202F\\u205F\\u3000","]");n=new RegExp(n,"g");for(var r,i=[];r=n.exec(e);)i.push(r);return i.map((function(e){return t.prepareMatch(e)}))}}},{key:"prepareMatch",value:function(e){var t,n=e.index,r=(t=e[0].charCodeAt(0),"".concat(t.toString(16).toUpperCase())),i=qr[r];return{startIndex:n,endIndex:n+e.length,match:e[0],title:"".concat(i," (\\u").concat(r,")"),marker:this.marker}}}]),e}(),Ur=function(){function e(){i(this,e),this.matches=[]}return a(e,[{key:"addMatches",value:function(e,t){t&&t.length&&(this.matches=function(e,t){for(var n,r=e.length,i=t.length,o=-1,a=[],s={a1:e,i1:0,a2:t,i2:0};s.i1<r||s.i2<i;)(n=Gr(s)).startIndex>=o&&a.push(n),o=n.endIndex;return a}(this.matches,t))}}]),e}();function Gr(e){var t=e.i1,n=e.i2,r=e.a1[t],i=e.a2[n];return r&&i&&r.startIndex<i.startIndex?(e.i1=t+1,r):r&&i?(e.i2=n+1,i):r?(e.i1=t+1,r):i?(e.i2=n+1,i):void 0}function Kr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qr=function(){function e(t,n,r){i(this,e),this.editable=t,this.win=t.win,this.focusedEditableHost=void 0,this.currentlyCheckedEditableHost=void 0,this.timeout={},this.config=Hr({},{checkOnInit:!1,checkOnFocus:!1,checkOnChange:!0,throttle:1e3,removeOnCorrection:!0,spellcheck:{marker:'<span class="highlight-spellcheck"></span>',throttle:1e3,spellcheckService:function(){}},whitespace:{marker:'<span class="highlight-whitespace"></span>'}},n);var o=this.config.spellcheck.spellcheckService,a=this.config.spellcheck.marker,s=this.config.whitespace.marker,c=Ft.createMarkerNode(a,"spellcheck",this.win),u=Ft.createMarkerNode(s,"spellcheck",this.win);this.spellcheckService=new Vr(o),this.spellcheck=new kt(c),this.whitespace=new zr(u),this.setupListeners()}return a(e,[{key:"setupListeners",value:function(){var e=this;this.config.checkOnFocus&&(this.editable.on("focus",(function(){return e.onFocus.apply(e,arguments)})),this.editable.on("blur",(function(){return e.onBlur.apply(e,arguments)}))),(this.config.checkOnChange||this.config.removeOnCorrection)&&this.editable.on("change",(function(){return e.onChange.apply(e,arguments)})),this.config.checkOnInit&&this.editable.on("init",(function(){return e.onInit.apply(e,arguments)}))}},{key:"onInit",value:function(e){this.highlight(e)}},{key:"onFocus",value:function(e){this.focusedEditableHost!==e&&(this.focusedEditableHost=e,this.editableHasChanged(e))}},{key:"onBlur",value:function(e){this.focusedEditableHost===e&&(this.focusedEditableHost=void 0)}},{key:"onChange",value:function(e){this.config.checkOnChange&&this.editableHasChanged(e,this.config.throttle),this.config.removeOnCorrection&&this.removeHighlightsAtCursor(e)}},{key:"editableHasChanged",value:function(e,t){var n=this;this.timeout.id&&this.timeout.editableHost===e&&clearTimeout(this.timeout.id);var r=setTimeout((function(){n.highlight(e),n.timeout={}}),t||0);this.timeout={id:r,editableHost:e}}},{key:"highlight",value:function(e){var t=this,n=At.extractText(e);this.spellcheckService.check(n,(function(r,i){if(!r){n=At.extractText(e);var o=new Ur,a=t.spellcheck.findMatches(n,i);o.addMatches("spellcheck",a),a=t.whitespace.findMatches(n),o.addMatches("whitespace",a),t.safeHighlightMatches(e,o.matches)}}))}},{key:"safeHighlightMatches",value:function(e,t){var n=this,r=this.editable.getSelection(e);r?r.retainVisibleSelection((function(){n.highlightMatches(e,t)})):this.highlightMatches(e,t),this.editable.dispatcher&&this.editable.dispatcher.notify("spellcheckUpdated",e)}},{key:"highlightMatches",value:function(e,t){this.removeHighlights(e),t&&t.length>0&&At.highlightMatches(e,t)}},{key:"removeHighlights",value:function(e){e=m(e,this.win.document);var t,n=Kr(v('[data-highlight="spellcheck"]',e));try{for(n.s();!(t=n.n()).done;)Re(t.value)}catch(e){n.e(e)}finally{n.f()}}},{key:"removeHighlightsAtCursor",value:function(e){e=m(e,this.win.document);var t=this.editable.getSelection(e);if(t&&t.isCursor){var n,r=t.range.startContainer;3===r.nodeType&&(r=r.parentNode);do{if(r===e)return;if("spellcheck"===r.getAttribute("data-highlight")){n=r.getAttribute("data-word-id");break}}while(r=r.parentNode);n&&t.retainVisibleSelection((function(){var t,r=Kr(v('[data-word-id="'.concat(n,'"]'),e));try{for(r.s();!(t=r.n()).done;)Re(t.value)}catch(e){r.e(e)}finally{r.f()}}))}}}]),e}();function Yr(){if(!1!==u.log&&n.g.console){var e=1===arguments.length?arguments[0]:Array.from(arguments);return 1!==arguments.length&&"trace"===e[e.length-1]&&(e.pop(),console.trace&&console.trace()),console.log(e)}}function Xr(e){return He(new Nt(e,"getNextTextNode"))}function Zr(e){for(var t,n=e.textNodes,r=e.absOffset,i=0,o=0,a=0;a<n.length;a++){var s=n[a];if(r<=i+s.textContent.length){t=s,o=r-i;break}i+=s.textContent.length}return{node:t,relativeOffset:o}}function Jr(e){e.rightLimit=e.currentOffset,e.currentOffset=Math.floor((e.currentOffset+e.leftLimit)/2)}function ei(e){e.leftLimit=e.currentOffset,e.currentOffset=Math.ceil((e.currentOffset+e.rightLimit)/2)}function ti(e){var t=Zr({textNodes:e.textNodes,absOffset:e.offset}),n=t.node,r=t.relativeOffset,i=n.ownerDocument.createRange();return i.setStart(n,r),i.collapse(!0),i}function ni(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ri(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ii=function(){function e(t){i(this,e);var n,r={window,defaultBehavior:!0,mouseMoveSelectionChanges:!1,browserSpellcheck:!0};this.config=Object.assign(r,t),this.win=this.config.window,this.editableSelector=".".concat(u.editableClass),c().initialized||c().init(),this.dispatcher=new zt(this),!0===this.config.defaultBehavior&&this.dispatcher.on((n=function(e){var t=e.win.document;return{focus:function(e){R(e)&&e.appendChild(t.createTextNode("\ufeff"))},blur:function(e){ee(e)},selection:function(e,t){Yr(t?"Default selection behavior":"Default selection empty behavior")},cursor:function(e,t){Yr(t?"Default cursor behavior":"Default cursor empty behavior")},newline:function(e,n){if(n.isAtTextEnd()){var r,i=t.createElement("br");n.insertBefore(i),3===(null===(r=i.nextSibling)||void 0===r?void 0:r.nodeType)&&"\ufeff"===i.nextSibling.textContent[0]||n.insertAfter(t.createTextNode("\ufeff"))}else n.insertBefore(t.createElement("br"));n.setVisibleSelection()},insert:function(e,t,n){var r=e.parentNode,i=e.cloneNode(!1);switch(i.id&&i.removeAttribute("id"),t){case"before":r.insertBefore(i,e),e.focus();break;case"after":r.insertBefore(i,e.nextSibling),i.focus()}},split:function(e,t,n,r){var i=e.cloneNode(!1);for(i.appendChild(t),e.parentNode.insertBefore(i,e);e.firstChild;)e.removeChild(e.firstChild);e.appendChild(n),X(i),X(e),e.focus()},merge:function(t,n,r){var i,o;switch(n){case"before":i=Fe(t),o=t;break;case"after":i=t,o=Le(t)}i&&o&&(r=i.childNodes.length>0?e.appendTo(i,o.innerHTML):e.prependTo(i,o.innerHTML),o.remove(),r.save(),X(i),r.restore(),r.setVisibleSelection())},empty:function(e){Yr("Default empty behavior")},switch:function(e,t,n){switch(t){case"before":var r=Fe(e);r&&(n.moveAtTextEnd(r),n.setVisibleSelection());break;case"after":var i=Le(e);i&&(n.moveAtBeginning(i),n.setVisibleSelection())}},move:function(e,t,n){Yr("Default move behavior")},paste:function(t,n,r){if(0!==n.length){if(r.insertBefore(n.shift()),0===n.length)return r.setVisibleSelection();var i=t.parentNode,o=t;n.forEach((function(e){var n=t.cloneNode(!1);n.id&&n.removeAttribute("id");var r=re(e);n.appendChild(r),i.insertBefore(n,o.nextSibling),o=n})),e.createCursorAtEnd(o).setVisibleSelection()}},clipboard:function(e,t,n){Yr("Default clipboard behavior")},toggleBold:function(e){e.toggleBold()},toggleEmphasis:function(e){e.toggleEmphasis()}}}(this),{focus:function(e){n.focus(e)},blur:function(e){n.blur(e)},flow:function(e,t){n.flow(e,t)},selection:function(e,t){n.selection(e,t)},cursor:function(e,t){n.cursor(e,t)},newline:function(e,t){n.newline(e,t)},split:function(e,t,r,i){n.split(e,t,r,i)},insert:function(e,t,r){n.insert(e,t,r)},merge:function(e,t,r){n.merge(e,t,r)},empty:function(e){n.empty(e)},switch:function(e,t,r){n.switch(e,t,r)},move:function(e,t,r){n.move(e,t,r)},clipboard:function(e,t,r){n.clipboard(e,t,r)},paste:function(e,t,r){n.paste(e,t,r)},toggleBold:function(e){n.toggleBold(e)},toggleEmphasis:function(e){n.toggleEmphasis(e)}}))}return a(e,[{key:"add",value:function(e){return this.enable(e),this}},{key:"remove",value:function(e){var t=v(e,this.win.document);this.disable(t);var n,r=ni(t);try{for(r.s();!(n=r.n()).done;)n.value.classList.remove(u.editableDisabledClass)}catch(e){r.e(e)}finally{r.f()}return this}},{key:"disable",value:function(e){var t,n,r=ni(v(e||".".concat(u.editableClass),this.win.document));try{for(r.s();!(t=r.n()).done;)(n=t.value).removeAttribute("contenteditable"),n.removeAttribute("spellcheck"),function(e,t){if(e.hasAttribute("data-editable")){var n=e.getAttribute("data-editable");Pe[n]=void 0}}(n),n.classList.remove(u.editableClass),n.classList.add(u.editableDisabledClass)}catch(e){r.e(e)}finally{r.f()}return this}},{key:"enable",value:function(e,t){var n,r=this.config.browserSpellcheck,i=ni(v(e||".".concat(u.editableDisabledClass),this.win.document));try{for(i.s();!(n=i.n()).done;){var o=n.value;Ie(o,{normalize:t,shouldSpellcheck:r}),this.dispatcher.notify("init",o)}}catch(e){i.e(e)}finally{i.f()}return this}},{key:"suspend",value:function(e){var t,n=ni(v(e||".".concat(u.editableClass),this.win.document));try{for(n.s();!(t=n.n()).done;)t.value.removeAttribute("contenteditable")}catch(e){n.e(e)}finally{n.f()}return this.dispatcher.suspend(),this}},{key:"continue",value:function(e){var t,n=ni(v(e||".".concat(u.editableClass),this.win.document));try{for(n.s();!(t=n.n()).done;)t.value.setAttribute("contenteditable",!0)}catch(e){n.e(e)}finally{n.f()}return this.dispatcher.continue(),this}},{key:"createCursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"beginning",n=bt.findHost(e,this.editableSelector);if(n){var r=c().createRange();return"beginning"===t||"end"===t?(r.selectNodeContents(e),r.collapse("beginning"===t)):e!==n?"before"===t?(r.setStartBefore(e),r.setEndBefore(e)):"after"===t&&(r.setStartAfter(e),r.setEndAfter(e)):l("EditableJS: cannot create cursor outside of an editable block."),new bt(n,r)}}},{key:"createCursorAtCharacterOffset",value:function(e){var t=e.element,n=e.offset,r=Zr({textNodes:Xr(t),absOffset:n}),i=r.node,o=r.relativeOffset,a=c().createRange();a.setStart(i,o),a.collapse(!0);var s=bt.findHost(t,this.editableSelector),u=new bt(s,a);return u.setVisibleSelection(),u}},{key:"createCursorAtBeginning",value:function(e){return this.createCursor(e,"beginning")}},{key:"createCursorAtEnd",value:function(e){return this.createCursor(e,"end")}},{key:"createCursorBefore",value:function(e){return this.createCursor(e,"before")}},{key:"createCursorAfter",value:function(e){return this.createCursor(e,"after")}},{key:"getContent",value:function(e){return te(e)}},{key:"appendTo",value:function(e,t){var n=ie(e,this.win.document),r=this.createCursor(n,"end");return r.insertAfter("string"==typeof t?re(t):t),r}},{key:"prependTo",value:function(e,t){var n=ie(e,this.win.document),r=this.createCursor(n,"beginning");return r.insertBefore("string"==typeof t?re(t):t),r}},{key:"getSelection",value:function(e){var t=this.dispatcher.selectionWatcher.getFreshSelection();if(!e||!t)return t;var n=t.range;try{n.compareNode(e)!==n.NODE_BEFORE_AND_AFTER&&(t=void 0)}catch(e){t=void 0}return t}},{key:"setupHighlighting",value:function(e){return this.highlighting=new Qr(this,e),this}},{key:"setupSpellcheck",value:function(e){var t,n=this;e.markerNode&&(t=e.markerNode.outerHTML),this.setupHighlighting({throttle:e.throttle,spellcheck:{marker:t,spellcheckService:e.spellcheckService}}),this.spellcheck={checkSpelling:function(e){n.highlighting.highlight(e)}}}},{key:"highlight",value:function(e){var t=e.editableHost,n=e.text,r=e.highlightId,i=e.textRange,o=e.raiseEvents,a=e.type,s=void 0===a?"comment":a;return i?"number"!=typeof i.start||"number"!=typeof i.end?(l("Error in Editable.highlight: You passed a textRange object with invalid keys. Expected shape: { start: Number, end: Number }"),-1):i.start===i.end?(l("Error in Editable.highlight: You passed a textRange object with equal start and end offsets, which is considered a cursor and therefore unfit to create a highlight."),-1):Ft.highlightRange(t,r,i.start,i.end,o?this.dispatcher:void 0,s):Ft.highlightText(t,n,r,s)}},{key:"getHighlightPositions",value:function(e){var t=e.editableHost,n=e.type;return Ft.extractHighlightedRanges(t,n)}},{key:"removeHighlight",value:function(e){var t=e.editableHost,n=e.highlightId,r=e.raiseEvents;Ft.removeHighlight(t,n,r?this.dispatcher:void 0)}},{key:"decorateHighlight",value:function(e){var t=e.editableHost,n=e.highlightId,r=e.addCssClass,i=e.removeCssClass;Ft.updateHighlight(t,n,r,i)}},{key:"on",value:function(e,t){return this.dispatcher.on(e,t),this}},{key:"off",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.dispatcher.off.apply(this.dispatcher,t),this}},{key:"unload",value:function(){return this.dispatcher.unload(),this}},{key:"findClosestCursorOffset",value:function(e){var t=e.element,n=e.origCoordinates,r=e.requiredOnFirstLine,i=void 0!==r&&r,o=e.requiredOnLastLine;return function(e){var t=e.host,n=e.requiredOnFirstLine,r=e.requiredOnLastLine,i=e.positionX,o=t.ownerDocument.createRange();o.selectNodeContents(t);var a=o.getBoundingClientRect(),s=Xr(t).reduce((function(e,t){return e+t.textContent.length}),0),c=Xr(t);if(0===s)return{wasFound:!1};for(var u,l={currentOffset:Math.floor(s/2),leftLimit:0,rightLimit:s},f=l.currentOffset,d=20;l.leftLimit<l.rightLimit&&d>0;){d=d-=1,f=l.currentOffset;var h=ti({textNodes:c,offset:l.currentOffset}).getBoundingClientRect();u=Math.abs(h.left-i),n&&a.top!==h.top?Jr(l):r&&a.bottom!==h.bottom?ei(l):i<h.left?Jr(l):ei(l)}var g=ti({textNodes:c,offset:l.currentOffset}).getBoundingClientRect(),p=Math.abs(g.left-i);return p<u&&(u=p,f=l.currentOffset),{distance:u,offset:f,wasFound:!0}}({host:t,requiredOnFirstLine:i,requiredOnLastLine:void 0!==o&&o,positionX:this.dispatcher.switchContext?this.dispatcher.switchContext.positionX:n.left})}}],[{key:"getGlobalConfig",value:function(){return u}},{key:"globalConfig",value:function(e){Object.assign(u,e),ut(u)}}]),e}();ii.parser=e,ii.content=t,ii.browser=ht(),["focus","blur","flow","selection","cursor","newline","insert","split","merge","empty","change","switch","move","clipboard","paste","spellcheckUpdated","selectToBoundary"].forEach((function(e){ii.prototype[e]=function(t){return this.on(e,t)}}))})(),r.Editable})()}));
//# sourceMappingURL=editable.js.map